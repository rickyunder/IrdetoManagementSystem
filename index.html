<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Irdeto Management System</title>
   <style>
    :root {
      --primary: #6a4bc3;
      --primary-light: #ece7ff;
      --primary-dark: #4b2ba1;
      --text-dark: #222;
      --text-light: #555;
      --border: #e4e4e7;
      --bg-light: #fafafa;
      --radius: 10px;
      --shadow: 0 2px 6px rgba(0,0,0,0.06);
    }

    body {
      margin: 0;
      font-family: "Inter", "Poppins", Arial, sans-serif;
      background: var(--bg-light);
      color: var(--text-dark);
      display: flex;
      flex-direction: column;
      height: 100vh;
    }

    header {
      background: #fff;
      padding: 12px 20px;
      font-size: 20px;
      font-weight: 600;
      display: flex;
      justify-content: space-between;
      align-items: center;
      border-bottom: 1px solid var(--border);
      box-shadow: var(--shadow);
      color: var(--text-dark);
    }

    header img {
      height: 45px;
    }


    .main {
      flex: 1;
      display: flex;
      overflow: hidden;
    }

    .sidebar {
      width: 240px;
      background: #fff;
      border-right: 1px solid var(--border);
      display: flex;
      flex-direction: column;
      font-size: 15px;
      padding-top: 10px;
    }

    .sidebar ul { 
      list-style: none; 
      padding: 0; 
      margin: 0; 
    }

    .sidebar li {
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 12px 18px;
      cursor: pointer;
      color: var(--text-dark);
      transition: 0.2s;
      font-weight: 500;
    }

    .sidebar li:hover {
      background: var(--primary-light);
      color: var(--primary-dark);
    }

    
    .sidebar li .arrow {
      margin-left: auto;
      opacity: 0.6;
    }

    .sidebar button {
      margin: 15px;
      padding: 12px;
      background: var(--primary);
      border: none;
      border-radius: var(--radius);
      color: #fff;
      cursor: pointer;
      font-size: 14px;
      transition: 0.2s;
    }

    .sidebar button:hover {
      background: var(--primary-dark);
    }

   
    .content {
  flex: 1;
  background: var(--bg-light);
  padding: 24px;
  overflow-y: auto;

 
  border-left: 10px solid #e8e1ff;     /* Light purple edge */
  border-top: 10px solid #e8e1ff;      /* Touch header */
  border-right: 10px solid #e8e1ff;    /* Symmetry */
  border-radius: 12px 12px 0 0;       /* Slight round only on top */
}


    
    .card {
      background: white; 
      border-radius: var(--radius); 
      padding: 14px; 
      margin-bottom: 14px;
      box-shadow: var(--shadow);
      border: 1px solid var(--border);
      font-size: 14px;
    }

    
    h3 {
      margin: 0 0 10px;
      cursor: pointer;
      background: var(--primary-light);
      padding: 8px;
      border-radius: var(--radius);
      font-size: 15px;
      color: var(--primary-dark);
      font-weight: 600;
    }

    label { 
      display: block; 
      margin-top: 6px; 
      font-weight: 600; 
      font-size: 13px; 
      color: var(--text-dark);
    }

    input, select, textarea {
      width: 100%; 
      padding: 6px; 
      margin-top: 4px;
      border: 1px solid var(--border);
      border-radius: var(--radius);
      font-size: 14px;
      color: var(--text-dark);
      background: #fff;
      transition: border 0.2s;
    }

    input:focus, select:focus, textarea:focus {
      border-color: var(--primary);
      outline: none;
    }

    button.small {
      background: var(--primary);
      color: white;
      border: none;
      padding: 6px 10px;
      margin-top: 6px;
      border-radius: var(--radius);
      cursor: pointer;
      font-size: 13px;
      transition: 0.2s;
    }

    button.small:hover {
      background: var(--primary-dark);
    }

   
    .top-fields-row {
      display: flex;
      flex-direction: row;
      gap: 12px;
      margin-bottom: 16px;
      flex-wrap: wrap;
    }

    .card.top-level {
      min-width: 120px;
      margin-bottom: 0;
      padding: 10px 12px;
      font-size: 15px;
      font-weight: 600;
      color: var(--primary-dark);
      cursor: pointer;
      background: var(--primary-light);
      border: 1px solid #dcd7fc;
      transition: 0.2s;
      text-align: center;
      flex: 0 0 auto;
    }

    .card.top-level:hover,
    .card.top-level.active {
      background: #ddd6fe;
      box-shadow: var(--shadow);
      border-color: var(--primary);
    }

    
    .welcome {
      text-align: center; 
      padding: 70px;
      color: var(--text-dark);
    }

    .welcome img {
      max-width: 340px; 
      margin-bottom: 2px;
    }

    .welcome h1 {
      color: var(--primary-dark); 
      font-size: 28px;
      margin-bottom: 12px;
      font-weight: 600;
    }

    .welcome p {
      color: var(--text-light); 
      font-size: 18px;
    }
</style>

    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2.39.7/dist/umd/supabase.min.js"></script>
</head>

<!-- JSON VIEW MODAL -->
<div id="jsonModal" style="
  display:none;
  position:fixed;
  inset:0;
  background:rgba(0,0,0,0.6);
  z-index:9999;
  align-items:center;
  justify-content:center;
">
  <div style="
    background:#fff;
    width:90%;
    max-width:900px;
    max-height:85vh;
    border-radius:10px;
    padding:16px;
    display:flex;
    flex-direction:column;
  ">
    <div style="display:flex; justify-content:space-between; align-items:center;">
      <h3>Payload JSON</h3>
      <button class="small" onclick="closeJsonModal()">Close</button>
    </div>

    <pre id="jsonModalContent" style="
      margin-top:12px;
      background:#f6f6f6;
      padding:12px;
      overflow:auto;
      flex:1;
      font-size:13px;
    "></pre>
  </div>
</div>


<div id="payloadViewer" style="
  position:fixed;
  top:0;
  right:-45%;
  width:45%;
  height:100%;
  background:white;
  box-shadow:-4px 0 12px rgba(0,0,0,0.2);
  z-index:9999;
  transition: right 0.3s ease;
  display:flex;
  flex-direction:column;
">
  <div style="
    padding:12px;
    display:flex;
    justify-content:space-between;
    align-items:center;
    border-bottom:1px solid #ddd;
  ">
    <strong>Payload JSON</strong>
    <div>
      <button class="small" onclick="downloadViewedPayload()">Download</button>
      <button class="small" onclick="closePayloadView()">Close</button>
    </div>
  </div>

  <pre id="payloadViewerContent" style="
    flex:1;
    overflow:auto;
    padding:12px;
    font-size:13px;
    background:#f6f6f6;
  "></pre>
</div>



<body>
  <header style="display:flex; align-items:center; justify-content: space-between;">
  <div style="display:flex; gap:20px; align-items:center;">
    <span>Irdeto Management System</span>
  </div>

  <div style="display:flex; gap:20px; align-items:center;">
    <button class="small" onclick="loadListView()">List</button>
    <img src="logo.9b855fd95b676e72.svg" alt="IRDETO Logo">
  </div>
</header>


    <div class="main">
    <div class="sidebar">
            <ul>
                <li onclick="loadCategory('movie')">Movies</li>
                <li onclick="loadCategory('tvshow')">TV Show</li>
                <li onclick="loadCategory('series')">Series</li>
                <li onclick="loadCategory('season')">Season</li>
                <li onclick="loadCategory('boxset')">Boxset</li>
                <li onclick="loadCategory('trailers')">Trailers</li>
                <li onclick="loadEPGFetcher()">EPG Fetcher</li>
            </ul>

     

      <button onclick="downloadJSON()">Download JSON</button>
    </div>
    <div class="content" id="formContainer">
      <div class="welcome">
        <img src="welcome.13acfd2537f15b02.svg" alt="IRDETO">
        <h1>Welcome</h1>
        <p>Let's get started! Click the left navigation to start your journey</p>
      </div>
    </div>
  </div>
      
    <script>   
        const payloadCache = new Map(); 
        const SUPABASE_URL = 'https://hozwvtsitrzozejaapdv.supabase.co';
        const SUPABASE_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imhvend2dHNpdHJ6b3plamFhcGR2Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjAzNzU2MDgsImV4cCI6MjA3NTk1MTYwOH0.Wg6rp7o2Rwkt6Y8038X9-9KvoNMoQD_oKntg5MByczo';
        const supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_KEY);
       async function searchByPackageId() {
  // 1Ô∏è‚É£ Read & sanitize input
  const pkgIdInput = document.getElementById("searchPackageId");
  const pkgId = pkgIdInput.value.trim();

  if (!pkgId) {
    alert("Please enter a Package ID");
    return;
  }

  console.log("Searching for package_id:", pkgId);

  // 2Ô∏è‚É£ Query Supabase (SAFE MODE ‚Äì no .single())
  const { data, error } = await supabase
    .from("newirdata")
    .select("payload, package_id")
    .eq("package_id", pkgId)
    .limit(1);

  console.log("Search result:", data, error);

  // 3Ô∏è‚É£ Handle errors
  if (error) {
    alert("Search error: " + error.message);
    return;
  }

  if (!data || data.length === 0) {
    alert("No JSON found for Package ID: " + pkgId);
    return;
  }

  // 4Ô∏è‚É£ Store for update step later
  currentPayload = data[0].payload;
  currentPackageId = data[0].package_id;

  // 5Ô∏è‚É£ Load JSON into editor
  loadJsonForEditing(currentPayload);
}

        function loadJsonForEditing(payload) {
  const formContainer = document.getElementById("formContainer");

  // 1Ô∏è‚É£ Clear existing UI
  formContainer.innerHTML = "";

  // 2Ô∏è‚É£ Mark edit mode
  formContainer.dataset.active = "edit";

  // 3Ô∏è‚É£ Validate payload structure
  if (!payload || !payload.data || !payload.data[0]) {
    alert("Invalid JSON structure");
    return;
  }

  const dataObj = payload.data[0];

  // 4Ô∏è‚É£ Create top-level navigation (same UX as loadCategory)
  const topFieldsRow = document.createElement("div");
  topFieldsRow.className = "top-fields-row";

  Object.keys(dataObj).forEach(key => {
    const topCard = document.createElement("div");
    topCard.className = "card top-level";
    topCard.textContent = key;

    topCard.onclick = () => {
      // Remove previous detail panels
      Array.from(formContainer.querySelectorAll(".detail-card"))
        .forEach(e => e.remove());

      // Remove active state
      Array.from(formContainer.querySelectorAll(".card.top-level"))
        .forEach(e => e.classList.remove("active"));

      topCard.classList.add("active");

      // Detail editor
      const detailCard = document.createElement("div");
      detailCard.className = "card detail-card";

      // üî• Reuse your existing recursive editor
      buildForm(dataObj[key], detailCard, key, true);

      formContainer.appendChild(detailCard);
    };

    topFieldsRow.appendChild(topCard);
  });

  // 5Ô∏è‚É£ Render navigation
  formContainer.appendChild(topFieldsRow);
}

    const sampleData = {
movie: {
    "hits": "1",
    "responseCode": "200",
    "responseMessage": "Success",
    "data": [
        {
            "offers": [
                {
                    "blockAds": false,
                    "providerContentTier": [
                        {
                            "value": "10000"
                        },
                        {
                            "value": "29|30|33|34|53|230|236|237|479"
                        }
                    ],
                    "adsPostRoll": "N",
                    "providerContentTierLabel": [
                        "Family",
                        "Guest-Free"
                    ],
                    "comingSoonEndDate": "",
                    "adsEnabled": true,
                    "adsSupplier": "MBNS",
                    "d2GoMaxPlay_countLabel": "",
                    "adsPreRoll": "N",
                    "d2GoPlaybackPeriodLabel": "",
                    "sellingPeriodStart": null,
                    "serviceLabel": "payTV(STB_OTT_STV)",
                    "adsMidRoll": "N",
                    "offerStart": "2025-01-01 00:00:00",
                    "d2GoRetentionPeriodLabel": "",
                    "assetLifeCycle": "",
                    "offerRow": [
                        {
                            "inAppPrice": "Not Applicable",
                            "offerTypeLabel": "FREE",
                            "bmLabel": null,
                            "maxView": 0,
                            "priceLabelGst": 0,
                            "regionLabel": "Malaysia",
                            "currencyLabel": null,
                            "priceLabel": null
                        }
                    ],
                    "offerEnd": "2026-12-01 23:59:59",
                    "prelogin": true,
                    "castingLabel": [],
                    "sfvAccountLabel": [],
                    "thirdPartyLabel": "",
                    "downloadToGoivpAdiProviderId": "",
                    "download2Go": false,
                    "sellingPeriodEnd": null,
                    "chargeCode": "CUVODRES"
                }
            ],
            "linearSchedule": {
                "linearChargeCodePriceValueGst": "",
                "linearChargeCodeTypeLabel": "",
                "linearChargeCodePriceLabel": "",
                "epgLink": [],
                "linearChargeCode": "",
                "linearChargeCodePriceValue": ""
            },
            "metadata": {
                "englishMetadata": {
                    "marketingMessage": "Po continues his \"legendary adventures of awesomeness\"",
                    "episodeTitle": "",
                    "audioLanguageLabel": "eng",
                    "yearOfRelease": 2016,
                    "keywords": [
                        "Animation",
                        "Astro Showcase",
                        "English Animation",
                        "English Movies",
                        "English",
                        "kai",
                        "available",
                        "po",
                        "kung",
                        "sweep",
                        "clumsy",
                        "english cantonese audio",
                        "fun love",
                        "available english cantonese",
                        "panda",
                        "audio",
                        "long lose",
                        "cantonese audio",
                        "english cantonese",
                        "kung fu",
                        "fu",
                        "available english",
                        "cantonese",
                        "paradise",
                        "kung fu master",
                        "Kung Fu Panda 3",
                        "Movies Animation",
                        "Movies"
                    ],
                    "directors": [
                        "Alessandro Carloni"
                    ],
                    "seasonNumber": "",
                    "title": "Kung Fu Panda 3",
                    "episodeNumber": "",
                    "subFilter": [
                        {
                            "code": "1~15",
                            "label": "Animation",
                            "value": "Filter/5"
                        }
                    ],
                    "certification": "U",
                    "filter": {
                        "label": "Movies",
                        "value": "Filter/42"
                    },
                    "subGenre": "Animation",
                    "shortSynopsis": "Po is reunited with his long-lost father and also finds out his calling in life but first he has to take on Kai, who wants to steal the 'qi' of every kung fu master. Available in English & Cantonese audio.",
                    "actors": [
                        "Jack Black",
                        "Bryan Cranston"
                    ],
                    "genre": "Movie",
                    "yearOfRealease": 2016,
                    "producer": [],
                    "longSynopsis": "When Po's long-lost panda father suddenly reappears, the reunited duo travels to a secret panda paradise to meet scores of hilarious new panda characters. But when the supernatural villain Kai begins to sweep across China defeating all the kung fu masters, Po must do the impossible: learn to train a village full of his fun-loving, clumsy brethren to become the ultimate band of Kung Fu Pandas! Available in English & Cantonese audio."
                },
                "vernacular": [
                    {
                        "shortSynopsis": "Po bersatu semula dengan ayah kandungnya dan juga mendapat seruan hidup tetapi sebelum itu dia harus melawan Kai yang mahu mencuri ‚Äòqi‚Äô setiap mahaguru kung fu. Tersedia dalam Bahasa Inggeris & Kantonis.",
                        "marketingMessage": "Po menyambung ‚Äúpengembaraan hebat legendanya‚Äù",
                        "episodeTitle": "",
                        "actors": [
                            "Jack Black",
                            "Bryan Cranston"
                        ],
                        "languageLabel": "may",
                        "directors": [
                            "Alessandro Carloni"
                        ],
                        "producer": [],
                        "title": "Kung Fu Panda 3",
                        "longSynopsis": "Apabila ayah panda Po tiba-tiba muncul semula, pasangan yang bersatu semula itu mengembara ke satu syurga rahsia panda dan bertemu bermacam panda-panda baru yang lucu. Tetapi apabila penjahat ghaib Kai mula menghapus semua mahaguru kung fu di seluruh China, Po harus melakukan yang mustahil: belajar melatih sebuah kampung dipenuhi panda yang suka berseronok dan cemerkap untuk menjadi sepasukan Panda Kung Fu yang hebat! Tersedia dalam Bahasa Inggeris dan Kantonis."
                    },
                    {
                        "shortSynopsis": "ÈòøÊ≥¢Áªà‰∫é‰∏éÂ§±Êï£Â§öÂπ¥ÁöÑËÄÅÁà∏ÈáçÈÄ¢Ôºå‰∏ÄÂêåÂõûÂà∞ÊïÖ‰π°ÁÜäÁå´Êùë‰∏éÊóè‰∫∫Âõ¢ËÅö„ÄÇÂ∞±Âú®Ê≠§Êó∂ÔºåÈÇ™ÊÅ∂ÂäõÈáèÂºÄÂßãÂ∏≠Âç∑‰∏≠ÂéüÂ§ßÂú∞ÔºåÈòøÊ≥¢ÂøÖÈ°ªËÇ©Ë¥üËµ∑ÊâìË¥•Â§ßÂèçÊ¥æÂ§©ÁÖûÁöÑ‰ªªÂä°„ÄÇÁîµÂΩ±Â§áÊúâËã±ËØ≠ÂèäÁ≤§ËØ≠ÈÖçÈü≥„ÄÇ",
                        "marketingMessage": "ÂäüÂ§´ÁÜäÁå´‰º†Â•áÂΩíÊù•„ÄÇ",
                        "episodeTitle": "",
                        "actors": [
                            "Jack Black",
                            "Bryan Cranston"
                        ],
                        "languageLabel": "chi",
                        "directors": [
                            "Alessandro Carloni"
                        ],
                        "producer": [],
                        "title": "Kung Fu Panda 3",
                        "longSynopsis": "ÈòøÊ≥¢Áªà‰∫éË∑üÂ§±Êï£Â∑≤‰πÖÁöÑÁà∂‰∫≤Âõ¢ËÅöÔºå‰∏§‰∫∫Êõ¥ÊéíÈô§‰∏áÈöæËøúËµ¥Á•ûÁßòÁÜäÁå´ÊùëÔºå‰∏é‰ªñ‰ª•‰∏∫Êó©Â∑≤ÁÅ≠ÁªùÁöÑÂêåÁ±ªÂõ¢ËÅö„ÄÇÂ∞±Âú®ËøôÊó∂ÂÄôÔºåÊ≠¶ÂäüÈ´òÂº∫ÁöÑÂ§ßÂèçÊ¥æÂ§©ÁÖûÂº∫ÂäøÂ¥õËµ∑ÔºåÊÑèÂõæÂáªË¥•ÂÖ®ÂõΩÊ≠¶ÊûóÈ´òÊâãÔºåÁã¨Èú∏Â§©‰∏ã„ÄÇ‰∏∫‰∫Ü‰øùÊä§Êóè‰∫∫ÂíåÁÜäÁå´ÊùëÔºåÈòøÊ≥¢ÂøÖÈ°ªÂú®ÊúÄÁü≠ÁöÑÊó∂Èó¥ÂÜÖÔºåÂ∞ÜÁîüÊÄßÊ∏©È©ØÁöÑÁÜäÁå´‰ª¨ËÆ≠ÁªÉÊàê‰∏ÄÁæ§ÂäüÂ§´ÁÜäÁå´ÔºÅÁîµÂΩ±Â§áÊúâËã±ËØ≠ÂèäÁ≤§ËØ≠ÈÖçÈü≥„ÄÇ"
                    },
                    {
                        "shortSynopsis": "‡Æµ‡ØÜ‡Æï‡ØÅ‡Æ®‡Ææ‡Æ≥‡Øç‡Æï‡Æ≥‡ØÅ‡Æï‡Øç‡Æï‡ØÅ‡Æ™‡Øç ‡Æ™‡Æø‡Æ±‡Æï‡ØÅ ‡Æ™‡Øã ‡Æ§‡Æ©‡Øç ‡Æ§‡Æ®‡Øç‡Æ§‡Øà‡ÆØ‡Øã‡Æü‡ØÅ ‡Æá‡Æ£‡Øà‡Æ®‡Øç‡Æ§‡ØÅ‡Æµ‡Æø‡Æü‡Øç‡Æü‡Ææ‡Æ∞‡Øç.",
                        "marketingMessage": "‡Æ™‡Øã ‡Æ§‡Æ©‡Øç ‡ÆÖ‡Æ±‡Øç‡Æ™‡ØÅ‡Æ§‡ÆÆ‡Ææ‡Æ© ‡Æö‡Æï‡Ææ‡Æ™‡Øç‡Æ§ ‡Æö‡Ææ‡Æï‡Æö‡Æô‡Øç‡Æï‡Æ≥‡Øà‡Æ§‡Øç ‡Æ§‡Øä‡Æü‡Æ∞‡Øç‡Æï‡Æø‡Æ±‡Ææ‡Æ∞‡Øç",
                        "episodeTitle": "",
                        "actors": [
                            "Jack Black",
                            "Bryan Cranston"
                        ],
                        "languageLabel": "tam",
                        "directors": [
                            "Alessandro Carloni"
                        ],
                        "producer": [],
                        "title": "Kung Fu Panda 3",
                        "longSynopsis": "‡Æµ‡ØÜ‡Æï‡ØÅ‡Æ®‡Ææ‡Æ≥‡Øç‡Æï‡Æ≥‡ØÅ‡Æï‡Øç‡Æï‡ØÅ‡Æ™‡Øç ‡Æ™‡Æø‡Æ±‡Æï‡ØÅ ‡Æ§‡Æ©‡Øç ‡Æ§‡Æ®‡Øç‡Æ§‡Øà‡ÆØ‡Øã‡Æü‡ØÅ ‡Æá‡Æ£‡Øà‡Æ®‡Øç‡Æ§ ‡Æ™‡Øã, ‡Æ™‡Ææ‡Æ£‡Øç‡Æü‡Ææ‡Æï‡Øç‡Æï‡Æ≥‡Æø‡Æ©‡Øç ‡Æö‡Øä‡Æ∞‡Øç‡Æï‡Øç‡Æï‡Æ§‡Øç‡Æ§‡Æø‡Æ±‡Øç‡Æï‡ØÅ‡Æö‡Øç ‡Æö‡ØÜ‡Æ≤‡Øç‡Æï‡Æø‡Æ±‡Ææ‡Æ∞‡Øç. ‡Æ™‡ØÜ‡Æ∞‡ØÅ‡ÆÆ‡Øç‡Æµ‡Æø‡Æ≤‡Øç‡Æ≤‡Æ©‡Ææ‡Æ© ‡Æï‡Ææ‡ÆØ‡Øç, ‡Æé‡Æ≤‡Øç‡Æ≤‡Ææ ‡Æï‡ØÅ‡Æô‡Øç‡ÆÉ‡Æ™‡ØÅ ‡Æï‡ØÅ‡Æ∞‡ØÅ‡Æï‡Øç‡Æï‡Æ≥‡Øà‡ÆØ‡ØÅ‡ÆÆ‡Øç ‡Æµ‡ØÜ‡Æ©‡Øç‡Æ±‡ØÅ ‡Æö‡ØÄ‡Æ©‡Ææ‡Æµ‡Øà‡Æï‡Øç ‡Æï‡Øà‡Æ™‡Øç‡Æ™‡Æ±‡Øç‡Æ± ‡ÆÆ‡ØÅ‡ÆØ‡Æ≤‡ØÅ‡ÆÆ‡Øç‡Æ™‡Øã‡Æ§‡ØÅ, ‡ÆÖ‡Æµ‡Øç‡Æµ‡ØÇ‡Æ∞‡Æø‡Æ≤‡ØÅ‡Æ≥‡Øç‡Æ≥ ‡Æé‡Æ≤‡Øç‡Æ≤‡Ææ ‡Æ™‡Ææ‡Æ£‡Øç‡Æü‡Ææ‡Æï‡Øç‡Æï‡Æ≥‡Øà‡ÆØ‡ØÅ‡ÆÆ‡Øç ‡Æï‡ØÅ‡Æô‡Øç‡ÆÉ‡Æ™‡ØÅ ‡Æ™‡Ææ‡Æ£‡Øç‡Æü‡Ææ‡Æï‡Øç‡Æï‡Æ≥‡Ææ‡Æï ‡ÆÆ‡Ææ‡Æ±‡Øç‡Æ±‡ØÅ‡Æï‡Æø‡Æ±‡Ææ‡Æ∞‡Øç ‡Æ™‡Øã. ‡Æá‡Æ™‡Øç‡Æ™‡Æü‡ÆÆ‡Øç, ‡ÆÜ‡Æô‡Øç‡Æï‡Æø‡Æ≤‡ÆÆ‡Øç & ‡Æö‡ØÄ‡Æ©‡ÆÆ‡Øä‡Æ¥‡Æø‡ÆØ‡Æø‡Æ≤‡Øç ‡Æá‡Æ∞‡ØÅ‡Æï‡Øç‡Æï‡Æø‡Æ±‡Æ§‡ØÅ."
                    }
                ]
            },
            "access": {
                "swDrmResolutionCap": null,
                "hwDrmResolutionCap": null,
                "cdnTokenisation": false,
                "acrossAllDevice": null,
                "deviceSpecific": []
            },
            "outputMedia": [
                {
                    "introEOM": "",
                    "recapSOM": "",
                    "usage": "Full Asset",
                    "audioDetails": [
                        {
                            "trackNumber": 1,
                            "audioProperty": "Stereo",
                            "audioLanguage": "en"
                        },
                        {
                            "trackNumber": 2,
                            "audioProperty": "Stereo",
                            "audioLanguage": "yu"
                        },
                        {
                            "trackNumber": 3,
                            "audioProperty": "Dolby 5.1",
                            "audioLanguage": "en"
                        },
                        {
                            "trackNumber": 4,
                            "audioProperty": "Dolby 5.1",
                            "audioLanguage": "yu"
                        }
                    ],
                    "format": "HD",
                    "fileLocation": {
                        "onPrem": "\\isilon\\onprem\\",
                        "onCloud": "https://ivpcontributionstaging.s3.amazonaws.com/fullasset/PACK0000000000414879"
                    },
                    "type": "ATS",
                    "endCreditSOM": "",
                    "version": 3,
                    "duration": "01:30:54:00",
                    "introSOM": "",
                    "recapEOM": "",
                    "filename": "PACK0000000000414879_Layer1.ts",
                    "onPrem": false,
                    "mamVersionId": "HSTXJ01",
                    "subtitleDetails": [],
                    "hd": true,
                    "onCloud": true,
                    "endCreditEOM": ""
                },
                {
                    "introEOM": "",
                    "recapSOM": "",
                    "usage": "Full Asset",
                    "audioDetails": [],
                    "format": "HD",
                    "fileLocation": {
                        "onPrem": "\\isilon\\onprem\\",
                        "onCloud": "/ttml"
                    },
                    "type": "TTML",
                    "endCreditSOM": "",
                    "version": 2,
                    "duration": "",
                    "introSOM": "",
                    "recapEOM": "",
                    "filename": "HSTXJ01HM01-SIM.ttml",
                    "onPrem": false,
                    "mamVersionId": "HSTXJ01",
                    "subtitleDetails": [
                        {
                            "subtitleLanguage": "Hans"
                        }
                    ],
                    "hd": false,
                    "onCloud": true,
                    "endCreditEOM": ""
                },
                {
                    "introEOM": "",
                    "recapSOM": "",
                    "usage": "Full Asset",
                    "audioDetails": [],
                    "format": "HD",
                    "fileLocation": {
                        "onPrem": "\\isilon\\onprem\\",
                        "onCloud": "/ttml"
                    },
                    "type": "TTML",
                    "endCreditSOM": "",
                    "version": 2,
                    "duration": "",
                    "introSOM": "",
                    "recapEOM": "",
                    "filename": "HSTXJ01HM01-MYS.ttml",
                    "onPrem": false,
                    "mamVersionId": "HSTXJ01",
                    "subtitleDetails": [
                        {
                            "subtitleLanguage": "ms"
                        }
                    ],
                    "hd": false,
                    "onCloud": true,
                    "endCreditEOM": ""
                },
                {
                    "introEOM": "",
                    "recapSOM": "",
                    "usage": "Full Asset",
                    "audioDetails": [],
                    "format": "HD",
                    "fileLocation": {
                        "onPrem": "\\isilon\\onprem\\",
                        "onCloud": "/ttml"
                    },
                    "type": "TTML",
                    "endCreditSOM": "",
                    "version": 2,
                    "duration": "",
                    "introSOM": "",
                    "recapEOM": "",
                    "filename": "HSTXJ01-GBR.ttml",
                    "onPrem": false,
                    "mamVersionId": "HSTXJ01",
                    "subtitleDetails": [
                        {
                            "subtitleLanguage": "en"
                        }
                    ],
                    "hd": false,
                    "onCloud": true,
                    "endCreditEOM": ""
                }
            ],
            "hierarchyParents": [],
            "documentId": "1017294:22",
            "package_data": {
                "brandpage": false,
                "ndsPackageAssetId": "",
                "excludeBrand": false,
                "newLabelEnabled": false,
                "boxsetTypeLabel": "",
                "supplier": "",
                "additionalInfo": [],
                "audienceCommunity": [
                    "ASTRO"
                ],
                "packageName": "[M3] Title - Kung Fu Panda 3 (Astro Showcase)",
                "audienceLabel": "Astro",
                "catalogues": [
                    {
                        "isPlayable": true,
                        "isPresentable": true,
                        "isPurchasable": true,
                        "catalogue": "ottlive"
                    },
                    {
                        "isPlayable": true,
                        "isPresentable": true,
                        "isPurchasable": true,
                        "catalogue": "stb4klive"
                    },
                    {
                        "isPlayable": true,
                        "isPresentable": true,
                        "isPurchasable": true,
                        "catalogue": "stblive"
                    },
                    {
                        "isPlayable": true,
                        "isPresentable": true,
                        "isPurchasable": true,
                        "catalogue": "stvlive"
                    }
                ],
                "liveEventId": "",
                "updatedBy": "KCOKOKCH",
                "packageAssetId": "PACK0000000001017294",
                "packageId": "1017294",
                "packageTypeLabel": "Title",
                "classification": [
                    "Catch Up",
                    "Classification - Movies/English",
                    "IVP - Movies",
                    "ADS -  Enabled",
                    "ADS - 1-120sec"
                ],
                "acquisitionStartDate": "",
                "platformValue": "PayTV",
                "createdBy": "CSSCIASH",
                "sortOrder": null,
                "supplierLabel": "null",
                "acquisitionEndDate": "",
                "ownerChannels": [
                    {
                        "businessUnit": null,
                        "channels": [
                            {
                                "channelStbNumber": 413,
                                "channelId": 430,
                                "channelTitle": "Astro Showcase"
                            }
                        ]
                    }
                ],
                "platformLabel": "PayTV",
                "titleSortName": "ZZZ_Kung Fu Panda 3",
                "isSponsored": false
            },
            "media": {
                "images": [
                    {
                        "usageTypeLabel": "payTV Poster",
                        "fileName": "HSTXJ.jpg",
                        "fileSize": "825038",
                        "profile": [
                            "Channel Logo"
                        ],
                        "channelLogoChecksum": "bca18f1618019d398b8a1f29691f7196",
                        "checksum": "ee4b6d62a85a7197f3d2cff358c3e006",
                        "fileUrl": "https://s3-ap-southeast-1.amazonaws.com/ams-astro-tvp-nonprod/staging/images/HSTXJ.jpg",
                        "channelLogo": "https://s3-ap-southeast-1.amazonaws.com/ams-astro-tvp-nonprod/staging/images/AstroShowcase_2024_190x80.png",
                        "serviceLabel": [
                            "payTVSTBOTTSTV"
                        ],
                        "previewImage": "",
                        "dimensions": "1920:1080"
                    },
                    {
                        "usageTypeLabel": "payTV Poster",
                        "fileName": "HSTXJ_p.jpg",
                        "fileSize": "887978",
                        "profile": [
                            "Channel Logo"
                        ],
                        "channelLogoChecksum": "bca18f1618019d398b8a1f29691f7196",
                        "checksum": "d7cb3a16d5803d7b42ddbb7fcbff1d29",
                        "fileUrl": "https://s3-ap-southeast-1.amazonaws.com/ams-astro-tvp-nonprod/staging/images/HSTXJ_p.jpg",
                        "channelLogo": "https://s3-ap-southeast-1.amazonaws.com/ams-astro-tvp-nonprod/staging/images/AstroShowcase_2024_190x80.png",
                        "serviceLabel": [
                            "payTVSTBOTTSTV"
                        ],
                        "previewImage": "",
                        "dimensions": "1080:1620"
                    },
                    {
                        "usageTypeLabel": "SOTT Poster",
                        "fileName": "HSTXJ.jpg",
                        "fileSize": "825038",
                        "profile": [
                            "Clean"
                        ],
                        "channelLogoChecksum": null,
                        "checksum": "ee4b6d62a85a7197f3d2cff358c3e006",
                        "fileUrl": "https://s3-ap-southeast-1.amazonaws.com/ams-astro-tvp-nonprod/staging/images/HSTXJ.jpg",
                        "channelLogo": null,
                        "serviceLabel": [
                            "sottottstv"
                        ],
                        "previewImage": "https://s3-ap-southeast-1.amazonaws.com/ams-astro-tvp-nonprod/staging/images/HSTXJ.jpg",
                        "dimensions": "1920:1080"
                    }
                ],
                "subtitleMapping": [
                    {
                        "burnedIn": false,
                        "services": [
                            "payTV(STB_OTT_STV)"
                        ],
                        "languageValue": "chi"
                    },
                    {
                        "burnedIn": false,
                        "services": [
                            "payTV(STB_OTT_STV)"
                        ],
                        "languageValue": "eng"
                    },
                    {
                        "burnedIn": false,
                        "services": [
                            "payTV(STB_OTT_STV)"
                        ],
                        "languageValue": "may"
                    }
                ],
                "audioMapping": [
                    {
                        "services": [
                            "payTVSTBOTTSTV"
                        ],
                        "languageValue": "eng",
                        "trackValue": "Stereo 1 (1+2)"
                    },
                    {
                        "services": [
                            "payTVSTBOTTSTV"
                        ],
                        "languageValue": "yue",
                        "trackValue": "Stereo 2 (3+4)"
                    }
                ],
                "mediaPreview": {
                    "duration": null,
                    "durationInFrame": null,
                    "clipId": null,
                    "services": null
                },
                "mamSegments": [],
                "avPreview": {
                    "durationInSec": null,
                    "enable": true,
                    "startPositionInSec": null
                },
                "imageRibbons": [],
                "mediaFull": {
                    "duration": "136350",
                    "durationInFrame": "01:30:54:00",
                    "formatLabel": "High Definition (HD)",
                    "fullAssetClipId": "HSTXJ01",
                    "assetTypeLabel": "CATC"
                }
            },
            "publishData": [
                {
                    "publishAction": "update",
                    "publishDate": "2025-09-12 19:01:08",
                    "publishAuditId": 1693097,
                    "category": [
                        "Catch Up",
                        "Classification - Movies/English",
                        "IVP - Movies",
                        "ADS -  Enabled",
                        "ADS - 1-120sec"
                    ],
                    "user": "Kok Chien",
                    "platform": "PayTV",
                    "publishStatus": "Failed"
                },
                {
                    "publishAction": "update",
                    "publishDate": "2025-07-03 18:29:11",
                    "publishAuditId": 1688254,
                    "category": [
                        "Catch Up",
                        "Classification - Movies/English",
                        "IVP - Movies",
                        "ADS -  Enabled",
                        "ADS - 1-120sec"
                    ],
                    "user": "Kok Chien",
                    "platform": "PayTV",
                    "publishStatus": "Sent"
                },
                {
                    "publishAction": "update",
                    "publishDate": "2025-07-03 18:26:43",
                    "publishAuditId": 1688251,
                    "category": [
                        "Catch Up",
                        "Classification - Movies/English",
                        "IVP - Movies",
                        "ADS -  Enabled",
                        "ADS - 1-120sec"
                    ],
                    "user": "Kok Chien",
                    "platform": "PayTV",
                    "publishStatus": "Sent"
                },
                {
                    "publishAction": "publish",
                    "publishDate": "2025-06-20 13:48:24",
                    "publishAuditId": 1686993,
                    "category": [
                        "Catch Up",
                        "Classification - Movies/English",
                        "IVP - Movies",
                        "ADS -  Enabled",
                        "ADS - 1-120sec"
                    ],
                    "user": "Cia Shin Stage",
                    "platform": "PayTV",
                    "publishStatus": "Sent"
                }
            ],
            "hierarchyChild": null
        }
    ]
},  
tvshow : {
    "hits": "1",
    "responseCode": "200",
    "responseMessage": "Success",
    "data": [
        {
            "offers": [
                {
                    "blockAds": false,
                    "providerContentTier": [
                        {
                            "value": "10000"
                        },
                        {
                            "value": "29|30|33|34|53|230|236|237|479"
                        }
                    ],
                    "adsPostRoll": "N",
                    "providerContentTierLabel": [
                        "Family",
                        "Guest-Free"
                    ],
                    "comingSoonEndDate": "",
                    "adsEnabled": false,
                    "adsSupplier": "MBNS",
                    "d2GoMaxPlay_countLabel": "",
                    "adsPreRoll": "N",
                    "d2GoPlaybackPeriodLabel": "",
                    "sellingPeriodStart": null,
                    "serviceLabel": "payTV(STB_OTT_STV)",
                    "adsMidRoll": "N",
                    "offerStart": "2025-01-01 00:00:00",
                    "d2GoRetentionPeriodLabel": "",
                    "assetLifeCycle": "",
                    "offerRow": [
                        {
                            "inAppPrice": "Not Applicable",
                            "offerTypeLabel": "FREE",
                            "bmLabel": null,
                            "maxView": 30,
                            "priceLabelGst": 0,
                            "regionLabel": "Malaysia",
                            "currencyLabel": null,
                            "priceLabel": null
                        }
                    ],
                    "offerEnd": "2026-12-31 23:59:59",
                    "prelogin": true,
                    "castingLabel": [],
                    "sfvAccountLabel": [],
                    "thirdPartyLabel": "",
                    "downloadToGoivpAdiProviderId": "",
                    "download2Go": false,
                    "sellingPeriodEnd": null,
                    "chargeCode": "CUVODRES"
                }
            ],
            "linearSchedule": {
                "linearChargeCodePriceValueGst": "",
                "linearChargeCodeTypeLabel": "",
                "linearChargeCodePriceLabel": "",
                "epgLink": [],
                "linearChargeCode": "",
                "linearChargeCodePriceValue": ""
            },
            "metadata": {
                "englishMetadata": {
                    "marketingMessage": "",
                    "episodeTitle": "Several Leagues Under the Sea",
                    "audioLanguageLabel": "eng",
                    "yearOfRelease": 2008,
                    "keywords": [
                        "Cartoons",
                        "English Cartoons",
                        "English Kids",
                        "English",
                        "HBO GO",
                        "HBO Max",
                        "HBO Originals",
                        "HBO Rebrand",
                        "HBO",
                        "HBOGO",
                        "Kids Cartoons",
                        "Kids",
                        "Max Originals",
                        "Max Rebrand",
                        "Several Leagues Under the Sea",
                        "The Marvelous Misadventures of Flapjack"
                    ],
                    "directors": [],
                    "seasonNumber": "1",
                    "title": "The Marvelous Misadventures of Flapjack",
                    "episodeNumber": "1",
                    "subFilter": [
                        {
                            "code": "5~7",
                            "label": "Cartoons",
                            "value": "Filter/12"
                        }
                    ],
                    "certification": "U",
                    "filter": {
                        "label": "Children",
                        "value": "Filter/14"
                    },
                    "subGenre": "Series",
                    "shortSynopsis": "Bragging don't bring nothing but trouble. Just ask Flapjack...wait, you can't, he's busy racing a crazy inventor!",
                    "actors": [],
                    "genre": "Kids",
                    "yearOfRealease": 2008,
                    "producer": [],
                    "longSynopsis": "Bragging don't bring nothing but trouble. Just ask Flapjack...wait, you can't, he's busy racing a crazy inventor!"
                },
                "vernacular": [
                    {
                        "shortSynopsis": "",
                        "marketingMessage": "",
                        "episodeTitle": "",
                        "actors": [],
                        "languageLabel": "may",
                        "directors": [],
                        "producer": [],
                        "title": "",
                        "longSynopsis": ""
                    },
                    {
                        "shortSynopsis": "",
                        "marketingMessage": "",
                        "episodeTitle": "",
                        "actors": [],
                        "languageLabel": "chi",
                        "directors": [],
                        "producer": [],
                        "title": "",
                        "longSynopsis": ""
                    },
                    {
                        "shortSynopsis": "",
                        "marketingMessage": "",
                        "episodeTitle": "",
                        "actors": [],
                        "languageLabel": "tam",
                        "directors": [],
                        "producer": [],
                        "title": "",
                        "longSynopsis": ""
                    }
                ]
            },
            "access": {
                "swDrmResolutionCap": null,
                "hwDrmResolutionCap": null,
                "cdnTokenisation": false,
                "acrossAllDevice": null,
                "deviceSpecific": []
            },
            "outputMedia": [
                {
                    "introEOM": "00:00:29:24",
                    "recapSOM": "",
                    "usage": "Full Asset",
                    "audioDetails": [
                        {
                            "trackNumber": 1,
                            "audioProperty": "Stereo",
                            "audioLanguage": "en"
                        },
                        {
                            "trackNumber": 2,
                            "audioProperty": "Stereo",
                            "audioLanguage": "ms"
                        },
                        {
                            "trackNumber": 3,
                            "audioProperty": "Stereo",
                            "audioLanguage": "cm"
                        }
                    ],
                    "format": "HD",
                    "fileLocation": {
                        "onPrem": "\\isilon\\onprem\\",
                        "onCloud": "https://ivpcontributionstaging.s3.amazonaws.com/fullasset/PACK0000000000243395"
                    },
                    "type": "ATS",
                    "endCreditSOM": "00:11:18:12",
                    "version": 3,
                    "duration": "00:11:53:00",
                    "introSOM": "00:00:00:01",
                    "recapEOM": "",
                    "filename": "PACK0000000000243395_Layer1.ts",
                    "onPrem": false,
                    "mamVersionId": "JDDTS01",
                    "subtitleDetails": [],
                    "hd": true,
                    "onCloud": true,
                    "endCreditEOM": "00:11:53:00"
                },
                {
                    "introEOM": "",
                    "recapSOM": "",
                    "usage": "Full Asset",
                    "audioDetails": [],
                    "format": "HD",
                    "fileLocation": {
                        "onPrem": "\\isilon\\onprem\\",
                        "onCloud": "/ttml"
                    },
                    "type": "TTML",
                    "endCreditSOM": "",
                    "version": 2,
                    "duration": "",
                    "introSOM": "",
                    "recapEOM": "",
                    "filename": "JDDTS01-GBR.ttml",
                    "onPrem": false,
                    "mamVersionId": "JDDTS01",
                    "subtitleDetails": [
                        {
                            "subtitleLanguage": "en"
                        }
                    ],
                    "hd": false,
                    "onCloud": true,
                    "endCreditEOM": ""
                }
            ],
            "hierarchyParents": [
                {
                    "packId": 1017273,
                    "platformValue": [
                        "payTV"
                    ],
                    "parentTypeLabel": "Secondary",
                    "typeLabel": "Season",
                    "vodPackId": "PACK0000000001017272",
                    "title": "[M3] Season - The Marvelous Misadventure Of Flapjack S1 (Max)",
                    "platformLabel": [
                        "payTV"
                    ],
                    "parentId": 1017272
                }
            ],
            "documentId": "1017273:22",
            "package_data": {
                "brandpage": false,
                "ndsPackageAssetId": "",
                "excludeBrand": false,
                "newLabelEnabled": false,
                "boxsetTypeLabel": "",
                "supplier": "",
                "additionalInfo": [],
                "audienceCommunity": [
                    "ASTRO"
                ],
                "packageName": "Title - The Marvelous Misadventure Of Flapjack S1 Ep01 (Max)",
                "audienceLabel": "Astro",
                "catalogues": [
                    {
                        "isPlayable": true,
                        "isPresentable": true,
                        "isPurchasable": true,
                        "catalogue": "ottkidslive"
                    },
                    {
                        "isPlayable": true,
                        "isPresentable": true,
                        "isPurchasable": true,
                        "catalogue": "stbkidslive"
                    },
                    {
                        "isPlayable": true,
                        "isPresentable": true,
                        "isPurchasable": true,
                        "catalogue": "stvkidslive"
                    }
                ],
                "liveEventId": "",
                "updatedBy": "KCOKOKCH",
                "packageAssetId": "PACK0000000001017273",
                "packageId": "1017273",
                "packageTypeLabel": "Episode",
                "classification": [
                    "Catch Up",
                    "Classification - TVShows/English"
                ],
                "acquisitionStartDate": "",
                "platformValue": "PayTV",
                "createdBy": "CSSCIASH",
                "sortOrder": null,
                "supplierLabel": "null",
                "acquisitionEndDate": "",
                "ownerChannels": [
                    {
                        "businessUnit": null,
                        "channels": [
                            {
                                "channelStbNumber": 0,
                                "channelId": 327,
                                "channelTitle": "HBO Max"
                            }
                        ]
                    }
                ],
                "platformLabel": "PayTV",
                "titleSortName": "ZZZ_The Marvelous Misadventures of Flapjack",
                "isSponsored": false
            },
            "media": {
                "images": [
                    {
                        "usageTypeLabel": "payTV Poster",
                        "fileName": "JDDTS.jpg",
                        "fileSize": "429052",
                        "profile": [
                            "Channel Logo"
                        ],
                        "channelLogoChecksum": "4647a797bb9d159ac357769e2c93013f",
                        "checksum": "5298adb05bb4b5ddc9fa8adbfa8fb05a",
                        "fileUrl": "https://s3-ap-southeast-1.amazonaws.com/ams-astro-tvp-nonprod/staging/images/JDDTS.jpg",
                        "channelLogo": "https://s3-ap-southeast-1.amazonaws.com/ams-astro-tvp-nonprod/staging/images/HBOMAX_2025_190x80.png",
                        "serviceLabel": [
                            "payTVSTBOTTSTV"
                        ],
                        "previewImage": "",
                        "dimensions": "1920:1080"
                    }
                ],
                "subtitleMapping": [
                    {
                        "burnedIn": false,
                        "services": [
                            "payTV(STB_OTT_STV)"
                        ],
                        "languageValue": "eng"
                    }
                ],
                "audioMapping": [
                    {
                        "services": [
                            "payTVSTBOTTSTV"
                        ],
                        "languageValue": "eng",
                        "trackValue": "Stereo 1 (1+2)"
                    },
                    {
                        "services": [
                            "payTVSTBOTTSTV"
                        ],
                        "languageValue": "may",
                        "trackValue": "Stereo 2 (3+4)"
                    },
                    {
                        "services": [
                            "payTVSTBOTTSTV"
                        ],
                        "languageValue": "cmn",
                        "trackValue": "Stereo 3 (5+6)"
                    }
                ],
                "mediaPreview": {
                    "duration": null,
                    "durationInFrame": null,
                    "clipId": null,
                    "services": null
                },
                "mamSegments": [],
                "avPreview": {
                    "durationInSec": null,
                    "enable": true,
                    "startPositionInSec": null
                },
                "imageRibbons": [],
                "mediaFull": {
                    "duration": "17825",
                    "durationInFrame": "00:11:53:00",
                    "formatLabel": "High Definition (HD)",
                    "fullAssetClipId": "JDDTS01",
                    "assetTypeLabel": "CATC"
                }
            },
            "publishData": [
                {
                    "publishAction": "update",
                    "publishDate": "2025-09-12 19:01:08",
                    "publishAuditId": 1693095,
                    "category": [
                        "Catch Up",
                        "Classification - TVShows/English"
                    ],
                    "user": "Kok Chien",
                    "platform": "PayTV",
                    "publishStatus": "Failed"
                },
                {
                    "publishAction": "publish",
                    "publishDate": "2025-06-20 09:45:20",
                    "publishAuditId": 1686906,
                    "category": [
                        "Catch Up",
                        "Classification - TVShows/English"
                    ],
                    "user": "Cia Shin Stage",
                    "platform": "PayTV",
                    "publishStatus": "Sent"
                }
            ],
            "hierarchyChild": null
        }
    ]
},
season : {
    "hits": "1",
    "responseCode": "200",
    "responseMessage": "Success",
    "data": [
        {
            "offers": [
                {
                    "blockAds": false,
                    "providerContentTier": [
                        {
                            "value": "29|30|33|34|53|230|236|237|479"
                        }
                    ],
                    "adsPostRoll": "N",
                    "providerContentTierLabel": [
                        "Family"
                    ],
                    "comingSoonEndDate": "",
                    "adsEnabled": false,
                    "adsSupplier": "MBNS",
                    "d2GoMaxPlay_countLabel": "",
                    "adsPreRoll": "N",
                    "d2GoPlaybackPeriodLabel": "",
                    "sellingPeriodStart": null,
                    "serviceLabel": "payTV(STB_OTT_STV)",
                    "adsMidRoll": "N",
                    "offerStart": "2025-05-06 00:00:00",
                    "d2GoRetentionPeriodLabel": "",
                    "assetLifeCycle": "",
                    "offerRow": [
                        {
                            "inAppPrice": "Not Applicable",
                            "offerTypeLabel": "SVOD",
                            "bmLabel": null,
                            "maxView": 0,
                            "priceLabelGst": 0,
                            "regionLabel": "Malaysia",
                            "currencyLabel": null,
                            "priceLabel": null
                        }
                    ],
                    "offerEnd": "2026-05-06 00:00:00",
                    "prelogin": false,
                    "castingLabel": [],
                    "sfvAccountLabel": [],
                    "thirdPartyLabel": "",
                    "downloadToGoivpAdiProviderId": "",
                    "download2Go": false,
                    "sellingPeriodEnd": null,
                    "chargeCode": "CUVODRES"
                }
            ],
            "linearSchedule": {
                "linearChargeCodePriceValueGst": "",
                "linearChargeCodeTypeLabel": "",
                "linearChargeCodePriceLabel": "",
                "epgLink": [],
                "linearChargeCode": "",
                "linearChargeCodePriceValue": ""
            },
            "metadata": {
                "englishMetadata": {
                    "marketingMessage": "",
                    "episodeTitle": "",
                    "audioLanguageLabel": "eng",
                    "yearOfRelease": 2024,
                    "keywords": [
                        "Arena Bola",
                        "Bola Itu Life Week 2",
                        "English Football",
                        "English Sports",
                        "English",
                        "Football",
                        "Sports Football",
                        "Sports"
                    ],
                    "directors": [],
                    "seasonNumber": "",
                    "title": "Bola Itu Life Week 2",
                    "episodeNumber": "",
                    "subFilter": [
                        {
                            "code": "4~3",
                            "label": "Football",
                            "value": "Filter/31"
                        }
                    ],
                    "certification": "U",
                    "filter": {
                        "label": "Sports",
                        "value": "Filter/66"
                    },
                    "subGenre": "Football",
                    "shortSynopsis": "Short Synopsis - English - Premier League icon Shay Given joins the show to reflect on his stellar career in goal. From his rise at Blackburn Rovers to becoming Newcastle United legend.",
                    "actors": [],
                    "genre": "Sports",
                    "yearOfRealease": 2024,
                    "producer": [],
                    "longSynopsis": "Long Synopsis - English - Premier League icon Shay Given joins the show to reflect on his stellar career in goal. From his rise at Blackburn Rovers to becoming Newcastle United legend."
                },
                "vernacular": [
                    {
                        "shortSynopsis": "",
                        "marketingMessage": "",
                        "episodeTitle": "",
                        "actors": [],
                        "languageLabel": "may",
                        "directors": [],
                        "producer": [],
                        "title": "",
                        "longSynopsis": ""
                    },
                    {
                        "shortSynopsis": "",
                        "marketingMessage": "",
                        "episodeTitle": "",
                        "actors": [],
                        "languageLabel": "chi",
                        "directors": [],
                        "producer": [],
                        "title": "",
                        "longSynopsis": ""
                    },
                    {
                        "shortSynopsis": "",
                        "marketingMessage": "",
                        "episodeTitle": "",
                        "actors": [],
                        "languageLabel": "tam",
                        "directors": [],
                        "producer": [],
                        "title": "",
                        "longSynopsis": ""
                    }
                ]
            },
            "access": {
                "swDrmResolutionCap": null,
                "hwDrmResolutionCap": null,
                "cdnTokenisation": false,
                "acrossAllDevice": null,
                "deviceSpecific": []
            },
            "outputMedia": null,
            "hierarchyParents": [
                {
                    "packId": 1017318,
                    "platformValue": [
                        "iSOTT",
                        "payTV"
                    ],
                    "parentTypeLabel": "Secondary",
                    "typeLabel": "Series",
                    "vodPackId": "PACK0000000001017316",
                    "title": "Series - Bola Itu Life (sport - with season# and with ep#) (Arena Bola)",
                    "platformLabel": [
                        "iSOTT",
                        "payTV"
                    ],
                    "parentId": 1017316
                }
            ],
            "documentId": "1017318:22",
            "package_data": {
                "brandpage": false,
                "ndsPackageAssetId": "",
                "excludeBrand": false,
                "newLabelEnabled": false,
                "boxsetTypeLabel": "Presentation",
                "supplier": "",
                "additionalInfo": [],
                "audienceCommunity": [
                    "ASTRO",
                    "STAGING"
                ],
                "packageName": "Season - Bola Itu Life Week 2 (Arena Bola) Sort order 2",
                "audienceLabel": "Astro",
                "catalogues": [
                    {
                        "isPlayable": true,
                        "isPresentable": true,
                        "isPurchasable": true,
                        "catalogue": "ottlive"
                    },
                    {
                        "isPlayable": true,
                        "isPresentable": true,
                        "isPurchasable": true,
                        "catalogue": "stb4klive"
                    },
                    {
                        "isPlayable": true,
                        "isPresentable": true,
                        "isPurchasable": true,
                        "catalogue": "stblive"
                    },
                    {
                        "isPlayable": true,
                        "isPresentable": true,
                        "isPurchasable": true,
                        "catalogue": "stvlive"
                    }
                ],
                "liveEventId": "",
                "updatedBy": "JILBJILL",
                "packageAssetId": "PACK0000000001017318",
                "packageId": "1017318",
                "packageTypeLabel": "Season",
                "classification": [
                    "Catch Up",
                    "Classification - TVShows/English"
                ],
                "acquisitionStartDate": "",
                "platformValue": "PayTV",
                "createdBy": "JILBJILL",
                "sortOrder": "2",
                "supplierLabel": "null",
                "acquisitionEndDate": "",
                "ownerChannels": [
                    {
                        "businessUnit": null,
                        "channels": [
                            {
                                "channelStbNumber": 803,
                                "channelId": 486,
                                "channelTitle": "Arena Bola"
                            }
                        ]
                    }
                ],
                "platformLabel": "PayTV",
                "titleSortName": "249494840000_Bola Itu Life Week 2",
                "isSponsored": false
            },
            "media": {
                "images": [
                    {
                        "usageTypeLabel": "payTV Poster",
                        "fileName": "bolaitulife.jpg",
                        "fileSize": "981202",
                        "profile": [
                            "Channel Logo"
                        ],
                        "channelLogoChecksum": "75af037288e59ea782e207a93cc31cf6",
                        "checksum": "7a01b7d4ad8c8e96389ecacdede92403",
                        "fileUrl": "https://s3-ap-southeast-1.amazonaws.com/ams-astro-tvp-nonprod/staging/images/bolaitulife.jpg",
                        "channelLogo": "https://s3-ap-southeast-1.amazonaws.com/ams-astro-tvp-nonprod/staging/images/AstroArenaBola_2024_190x80.png",
                        "serviceLabel": [
                            "payTVSTBOTTSTV"
                        ],
                        "previewImage": "",
                        "dimensions": "1920:1080"
                    },
                    {
                        "usageTypeLabel": "SOTT Poster",
                        "fileName": "bolaitulife.jpg",
                        "fileSize": "981202",
                        "profile": [
                            "Channel Logo"
                        ],
                        "channelLogoChecksum": "75af037288e59ea782e207a93cc31cf6",
                        "checksum": "7a01b7d4ad8c8e96389ecacdede92403",
                        "fileUrl": "https://s3-ap-southeast-1.amazonaws.com/ams-astro-tvp-nonprod/staging/images/bolaitulife.jpg",
                        "channelLogo": "https://s3-ap-southeast-1.amazonaws.com/ams-astro-tvp-nonprod/staging/images/AstroArenaBola_2024_190x80.png",
                        "serviceLabel": [
                            "sottottstv"
                        ],
                        "previewImage": "",
                        "dimensions": "1920:1080"
                    }
                ],
                "subtitleMapping": [],
                "audioMapping": [],
                "mediaPreview": {
                    "duration": null,
                    "durationInFrame": null,
                    "clipId": null,
                    "services": null
                },
                "mamSegments": [],
                "avPreview": {
                    "durationInSec": null,
                    "enable": true,
                    "startPositionInSec": null
                },
                "imageRibbons": [],
                "mediaFull": {
                    "duration": null,
                    "durationInFrame": "",
                    "formatLabel": "",
                    "fullAssetClipId": "",
                    "assetTypeLabel": ""
                }
            },
            "publishData": [
                {
                    "publishAction": "update",
                    "publishDate": "2025-06-24 14:53:02",
                    "publishAuditId": 1687464,
                    "category": [
                        "Catch Up",
                        "Classification - TVShows/English"
                    ],
                    "user": "Jill",
                    "platform": "PayTV",
                    "publishStatus": "Sent"
                },
                {
                    "publishAction": "publish",
                    "publishDate": "2025-06-23 18:38:39",
                    "publishAuditId": 1687299,
                    "category": [
                        "Catch Up",
                        "Classification - TVShows/English"
                    ],
                    "user": "Jill",
                    "platform": "PayTV",
                    "publishStatus": "Sent"
                }
            ],
            "hierarchyChild": null
        }
    ]
},
series: {
    "hits": "1",
    "responseCode": "200",
    "responseMessage": "Success",
    "data": [
        {
            "offers": [
                {
                    "blockAds": false,
                    "providerContentTier": [
                        {
                            "value": "33|62|211|237"
                        },
                        {
                            "value": "33|62|237"
                        }
                    ],
                    "adsPostRoll": "N",
                    "providerContentTierLabel": [
                        "LIGA_MY",
                        "Sports"
                    ],
                    "comingSoonEndDate": "",
                    "adsEnabled": false,
                    "adsSupplier": "MBNS",
                    "d2GoMaxPlay_countLabel": "",
                    "adsPreRoll": "N",
                    "d2GoPlaybackPeriodLabel": "",
                    "sellingPeriodStart": "2025-01-01 00:00:00",
                    "serviceLabel": "payTV(STB_OTT_STV)",
                    "adsMidRoll": "N",
                    "offerStart": "2025-01-01 00:00:00",
                    "d2GoRetentionPeriodLabel": "",
                    "assetLifeCycle": "",
                    "offerRow": [
                        {
                            "inAppPrice": "Not Applicable",
                            "offerTypeLabel": "TVOD",
                            "bmLabel": null,
                            "maxView": 0,
                            "priceLabelGst": 80,
                            "regionLabel": "Malaysia",
                            "currencyLabel": "Malaysian Ringgit",
                            "priceLabel": "1000"
                        }
                    ],
                    "offerEnd": "2026-12-31 23:59:59",
                    "prelogin": false,
                    "castingLabel": [],
                    "sfvAccountLabel": [],
                    "thirdPartyLabel": "",
                    "downloadToGoivpAdiProviderId": "",
                    "download2Go": false,
                    "sellingPeriodEnd": "2026-12-31 23:59:59",
                    "chargeCode": "PAYTVM5CC01"
                }
            ],
            "linearSchedule": {
                "linearChargeCodePriceValueGst": "",
                "linearChargeCodeTypeLabel": "",
                "linearChargeCodePriceLabel": "",
                "epgLink": [],
                "linearChargeCode": "",
                "linearChargeCodePriceValue": ""
            },
            "metadata": {
                "englishMetadata": {
                    "marketingMessage": "",
                    "episodeTitle": "",
                    "audioLanguageLabel": "eng",
                    "yearOfRelease": 2024,
                    "keywords": [
                        "Astro Premier League",
                        "BPL",
                        "Business",
                        "English Business",
                        "English News",
                        "English",
                        "EPL",
                        "News Business",
                        "News",
                        "PL",
                        "PLTV",
                        "Premier League 24/25 Full Match: News"
                    ],
                    "directors": [],
                    "seasonNumber": "",
                    "title": "Premier League 24/25 Full Match: News",
                    "episodeNumber": "",
                    "subFilter": [
                        {
                            "code": "2~5",
                            "label": "Business",
                            "value": "Filter/29"
                        }
                    ],
                    "certification": "U",
                    "filter": {
                        "label": "News",
                        "value": "Filter/47"
                    },
                    "subGenre": "Business",
                    "shortSynopsis": "Catch up on the latest Premier League 2024/25 matches that you would not want to miss it!",
                    "actors": [],
                    "genre": "News",
                    "yearOfRealease": 2024,
                    "producer": [],
                    "longSynopsis": "Catch up on the latest Premier League 2024/25 matches that you would not want to miss it!"
                },
                "vernacular": [
                    {
                        "shortSynopsis": "",
                        "marketingMessage": "",
                        "episodeTitle": "",
                        "actors": [],
                        "languageLabel": "may",
                        "directors": [],
                        "producer": [],
                        "title": "",
                        "longSynopsis": ""
                    },
                    {
                        "shortSynopsis": "",
                        "marketingMessage": "",
                        "episodeTitle": "",
                        "actors": [],
                        "languageLabel": "chi",
                        "directors": [],
                        "producer": [],
                        "title": "",
                        "longSynopsis": ""
                    },
                    {
                        "shortSynopsis": "",
                        "marketingMessage": "",
                        "episodeTitle": "",
                        "actors": [],
                        "languageLabel": "tam",
                        "directors": [],
                        "producer": [],
                        "title": "",
                        "longSynopsis": ""
                    }
                ]
            },
            "access": {
                "swDrmResolutionCap": null,
                "hwDrmResolutionCap": null,
                "cdnTokenisation": false,
                "acrossAllDevice": null,
                "deviceSpecific": []
            },
            "outputMedia": [
                {
                    "introEOM": "",
                    "recapSOM": "",
                    "usage": "Preview Asset",
                    "audioDetails": [
                        {
                            "trackNumber": 1,
                            "audioProperty": "Stereo",
                            "audioLanguage": "ar"
                        }
                    ],
                    "format": "HD",
                    "fileLocation": {
                        "onPrem": null,
                        "onCloud": "https://ie-dp-stage.s3.amazonaws.com/irdeto/stage/ingest/IXAKF"
                    },
                    "type": "ATS",
                    "endCreditSOM": "",
                    "version": 2,
                    "duration": "00:00:30:00",
                    "introSOM": "",
                    "recapEOM": "",
                    "filename": "PACK0000000000305394_trailer_Layer1.ts",
                    "onPrem": false,
                    "mamVersionId": "IXAKF",
                    "subtitleDetails": [],
                    "hd": true,
                    "onCloud": true,
                    "endCreditEOM": ""
                }
            ],
            "hierarchyParents": [],
            "documentId": "1016835:22",
            "package_data": {
                "brandpage": false,
                "ndsPackageAssetId": "",
                "excludeBrand": false,
                "newLabelEnabled": false,
                "boxsetTypeLabel": "Presentation",
                "supplier": "",
                "additionalInfo": [],
                "audienceCommunity": [
                    "ASTRO"
                ],
                "packageName": "Boxset - Premier League 24/25 Full Match: News (Astro Premier League)",
                "audienceLabel": "Astro",
                "catalogues": [
                    {
                        "isPlayable": true,
                        "isPresentable": true,
                        "isPurchasable": true,
                        "catalogue": "ottlive"
                    },
                    {
                        "isPlayable": true,
                        "isPresentable": true,
                        "isPurchasable": true,
                        "catalogue": "stb4klive"
                    },
                    {
                        "isPlayable": true,
                        "isPresentable": true,
                        "isPurchasable": true,
                        "catalogue": "stblive"
                    },
                    {
                        "isPlayable": true,
                        "isPresentable": true,
                        "isPurchasable": true,
                        "catalogue": "stvlive"
                    }
                ],
                "liveEventId": "",
                "updatedBy": "KCOKOKCH",
                "packageAssetId": "PACK0000000001016835",
                "packageId": "1016835",
                "packageTypeLabel": "Series",
                "classification": [
                    "Catch Up",
                    "Classification - TVShows/Sports",
                    "STB Icon - Free",
                    "IVP - Sports",
                    "IVP - Sports/Thematic5"
                ],
                "acquisitionStartDate": "",
                "platformValue": "PayTV",
                "createdBy": "CSSCIASH",
                "sortOrder": null,
                "supplierLabel": "null",
                "acquisitionEndDate": "",
                "ownerChannels": [
                    {
                        "businessUnit": "Sports Business Unit",
                        "channels": [
                            {
                                "channelStbNumber": 811,
                                "channelId": 558,
                                "channelTitle": "Astro Premier League"
                            }
                        ]
                    }
                ],
                "platformLabel": "PayTV",
                "titleSortName": "ZZZ_Premier League 24/25 Full Match: News",
                "isSponsored": false
            },
            "media": {
                "images": [
                    {
                        "usageTypeLabel": "payTV Poster",
                        "fileName": "KOENH.jpg",
                        "fileSize": "1158193",
                        "profile": [
                            "Channel Logo"
                        ],
                        "channelLogoChecksum": "84761f16aaec61441df3db5b106495bd",
                        "checksum": "9e6834c9f1e9cad52b30dee02990170b",
                        "fileUrl": "https://s3-ap-southeast-1.amazonaws.com/ams-astro-tvp-nonprod/staging/images/KOENH.jpg",
                        "channelLogo": "https://s3-ap-southeast-1.amazonaws.com/ams-astro-tvp-nonprod/staging/images/AstroPremierLeague_2024_190x80.png",
                        "serviceLabel": [
                            "payTVSTBOTTSTV"
                        ],
                        "previewImage": "",
                        "dimensions": "1920:1080"
                    }
                ],
                "subtitleMapping": [],
                "audioMapping": [],
                "mediaPreview": {
                    "duration": null,
                    "durationInFrame": "",
                    "clipId": "IXAKF",
                    "services": [
                        "payTV(STB_OTT_STV)"
                    ]
                },
                "mamSegments": [
                    {
                        "duration": "00:00:00:01",
                        "som": "10:12:00:00",
                        "sequence": 7,
                        "eom": "10:12:00:01",
                        "part": 0,
                        "segmentType": "MIDR"
                    },
                    {
                        "duration": "00:09:41:20",
                        "som": "10:34:48:05",
                        "sequence": 11,
                        "eom": "10:44:30:00",
                        "part": 4,
                        "segmentType": "P"
                    },
                    {
                        "duration": "00:10:15:00",
                        "som": "10:24:33:05",
                        "sequence": 9,
                        "eom": "10:34:48:05",
                        "part": 3,
                        "segmentType": "P"
                    },
                    {
                        "duration": "00:12:35:20",
                        "som": "10:11:57:10",
                        "sequence": 5,
                        "eom": "10:24:33:05",
                        "part": 2,
                        "segmentType": "P"
                    },
                    {
                        "duration": "00:10:27:10",
                        "som": "10:01:30:00",
                        "sequence": 1,
                        "eom": "10:11:57:10",
                        "part": 1,
                        "segmentType": "P"
                    },
                    {
                        "duration": "00:01:00:00",
                        "som": "10:03:12:10",
                        "sequence": 3,
                        "eom": "10:04:12:10",
                        "part": 0,
                        "segmentType": "OPEN"
                    },
                    {
                        "duration": "00:00:58:16",
                        "som": "10:43:31:09",
                        "sequence": 13,
                        "eom": "10:44:30:00",
                        "part": 0,
                        "segmentType": "END"
                    }
                ],
                "avPreview": {
                    "durationInSec": null,
                    "enable": true,
                    "startPositionInSec": null
                },
                "imageRibbons": [],
                "mediaFull": {
                    "duration": null,
                    "durationInFrame": "",
                    "formatLabel": "",
                    "fullAssetClipId": "",
                    "assetTypeLabel": ""
                }
            },
            "publishData": [
                {
                    "publishAction": "update",
                    "publishDate": "2025-09-15 20:45:31",
                    "publishAuditId": 1693131,
                    "category": [
                        "Catch Up",
                        "Classification - TVShows/Sports",
                        "STB Icon - Free",
                        "IVP - Sports",
                        "IVP - Sports/Thematic5"
                    ],
                    "user": "Kok Chien",
                    "platform": "PayTV",
                    "publishStatus": "Failed"
                },
                {
                    "publishAction": "update",
                    "publishDate": "2025-09-12 19:01:08",
                    "publishAuditId": 1693049,
                    "category": [
                        "Catch Up",
                        "Classification - TVShows/Sports",
                        "STB Icon - Free",
                        "IVP - Sports",
                        "IVP - Sports/Thematic5"
                    ],
                    "user": "Kok Chien",
                    "platform": "PayTV",
                    "publishStatus": "Failed"
                },
                {
                    "publishAction": "publish",
                    "publishDate": "2025-06-26 10:48:19",
                    "publishAuditId": 1687823,
                    "category": [
                        "Catch Up",
                        "Classification - TVShows/Sports",
                        "STB Icon - Free",
                        "IVP - Sports",
                        "IVP - Sports/Thematic5"
                    ],
                    "user": "Cia Shin Stage",
                    "platform": "PayTV",
                    "publishStatus": "Sent"
                },
                {
                    "publishAction": "publish",
                    "publishDate": "2025-04-22 13:49:51",
                    "publishAuditId": 1683456,
                    "category": [
                        "Catch Up",
                        "Classification - TVShows/Sports",
                        "STB Icon - Free",
                        "IVP - Sports",
                        "IVP - Sports/Thematic5"
                    ],
                    "user": "Cia Shin Stage",
                    "platform": "PayTV",
                    "publishStatus": "Sent"
                },
                {
                    "publishAction": "publish",
                    "publishDate": "2025-04-21 13:08:44",
                    "publishAuditId": 1683433,
                    "category": [
                        "Catch Up",
                        "Classification - TVShows/Sports",
                        "STB Icon - Free",
                        "IVP - Sports",
                        "IVP - Sports/Thematic5"
                    ],
                    "user": "Cia Shin Stage",
                    "platform": "PayTV",
                    "publishStatus": "Sent"
                },
                {
                    "publishAction": "publish",
                    "publishDate": "2025-04-21 12:59:46",
                    "publishAuditId": 1683432,
                    "category": [
                        "Catch Up",
                        "Classification - TVShows/Sports",
                        "STB Icon - Free",
                        "IVP - Sports",
                        "IVP - Sports/Thematic5"
                    ],
                    "user": "Cia Shin Stage",
                    "platform": "PayTV",
                    "publishStatus": "Failed"
                }
            ],
            "hierarchyChild": null
        }
    ]
},
boxset: {
    "hits": "1",
    "responseCode": "200",
    "responseMessage": "Success",
    "data": [
        {
            "offers": [
                {
                    "blockAds": false,
                    "providerContentTier": [],
                    "adsPostRoll": "N",
                    "providerContentTierLabel": [],
                    "comingSoonEndDate": "",
                    "adsEnabled": false,
                    "adsSupplier": "MBNS",
                    "d2GoMaxPlay_countLabel": "",
                    "adsPreRoll": "N",
                    "d2GoPlaybackPeriodLabel": "",
                    "sellingPeriodStart": "2025-02-21 15:27:00",
                    "serviceLabel": "payTV(STB_OTT_STV)",
                    "adsMidRoll": "N",
                    "offerStart": "2025-02-21 15:27:00",
                    "d2GoRetentionPeriodLabel": "",
                    "assetLifeCycle": "",
                    "offerRow": [
                        {
                            "inAppPrice": "Not Applicable",
                            "offerTypeLabel": "TVOD",
                            "bmLabel": null,
                            "maxView": 1,
                            "priceLabelGst": 0,
                            "regionLabel": "Malaysia",
                            "currencyLabel": "Malaysian Ringgit",
                            "priceLabel": "0"
                        }
                    ],
                    "offerEnd": "2026-12-31 23:59:59",
                    "prelogin": false,
                    "castingLabel": [],
                    "sfvAccountLabel": [],
                    "thirdPartyLabel": "",
                    "downloadToGoivpAdiProviderId": "",
                    "download2Go": false,
                    "sellingPeriodEnd": "2026-12-30 23:59:59",
                    "chargeCode": "NA"
                }
            ],
            "linearSchedule": {
                "linearChargeCodePriceValueGst": "",
                "linearChargeCodeTypeLabel": "",
                "linearChargeCodePriceLabel": "",
                "epgLink": [],
                "linearChargeCode": "",
                "linearChargeCodePriceValue": ""
            },
            "metadata": {
                "englishMetadata": {
                    "marketingMessage": "",
                    "episodeTitle": "",
                    "audioLanguageLabel": "eng",
                    "yearOfRelease": 2023,
                    "keywords": [
                        "Adventure",
                        "Astro Best 468",
                        "Astro Best",
                        "Astro First HD (489)",
                        "Best",
                        "CP3 SIT - Illuminations 10 Movie Collection + Minions Mini Movie 0-9 [removed embedded trailer]",
                        "Drama",
                        "English Adventure",
                        "English Drama",
                        "English Movies",
                        "English",
                        "Movies Adventure",
                        "Movies Drama",
                        "Movies"
                    ],
                    "directors": [
                        "Rachel Kondo",
                        "Justin Marks"
                    ],
                    "seasonNumber": "",
                    "title": "CP3 SIT - Illuminations 10 Movie Collection + Minions Mini Movie 0-9 [removed embedded trailer]",
                    "episodeNumber": "",
                    "subFilter": [
                        {
                            "code": "1~17",
                            "label": "Adventure",
                            "value": "Filter/3"
                        },
                        {
                            "code": "1~16",
                            "label": "Drama",
                            "value": "Filter/24"
                        }
                    ],
                    "certification": "P12",
                    "filter": {
                        "label": "Movies",
                        "value": "Filter/42"
                    },
                    "subGenre": "Drama",
                    "shortSynopsis": "Great news! Now you can stream Disney+ Hotstar on your big screen TV with Ultra and Ulti Box",
                    "actors": [
                        "Cosmo Jarvis",
                        "Hiroyuki Sanada",
                        "Anna Sawai"
                    ],
                    "genre": "Movie",
                    "yearOfRealease": 2023,
                    "producer": [],
                    "longSynopsis": "Great news! Now you can stream Disney+ Hotstar on your big screen TV with Ultra and Ulti Box"
                },
                "vernacular": [
                    {
                        "shortSynopsis": "",
                        "marketingMessage": "",
                        "episodeTitle": "",
                        "actors": [],
                        "languageLabel": "may",
                        "directors": [],
                        "producer": [],
                        "title": "",
                        "longSynopsis": ""
                    },
                    {
                        "shortSynopsis": "",
                        "marketingMessage": "",
                        "episodeTitle": "",
                        "actors": [],
                        "languageLabel": "chi",
                        "directors": [],
                        "producer": [],
                        "title": "",
                        "longSynopsis": ""
                    },
                    {
                        "shortSynopsis": "",
                        "marketingMessage": "",
                        "episodeTitle": "",
                        "actors": [],
                        "languageLabel": "tam",
                        "directors": [],
                        "producer": [],
                        "title": "",
                        "longSynopsis": ""
                    },
                    {
                        "shortSynopsis": "",
                        "marketingMessage": "",
                        "episodeTitle": "",
                        "actors": [],
                        "languageLabel": "ind",
                        "directors": [],
                        "producer": [],
                        "title": "",
                        "longSynopsis": ""
                    },
                    {
                        "shortSynopsis": "",
                        "marketingMessage": "",
                        "episodeTitle": "",
                        "actors": [],
                        "languageLabel": "tha",
                        "directors": [],
                        "producer": [],
                        "title": "",
                        "longSynopsis": ""
                    }
                ]
            },
            "access": {
                "swDrmResolutionCap": null,
                "hwDrmResolutionCap": null,
                "cdnTokenisation": false,
                "acrossAllDevice": null,
                "deviceSpecific": []
            },
            "outputMedia": null,
            "hierarchyParents": [],
            "documentId": "1017562:22",
            "package_data": {
                "brandpage": false,
                "ndsPackageAssetId": "",
                "excludeBrand": false,
                "newLabelEnabled": false,
                "provider": "",
                "boxsetTypeLabel": "Collection",
                "providerId": "",
                "supplier": "",
                "additionalInfo": [],
                "audienceCommunity": [
                    "ASTRO"
                ],
                "packageName": "CP3 SIT - Illuminations 10 Movie Collection + Minions Mini Movie [Copy] 0-9 removed embedded trailer",
                "audienceLabel": "Astro",
                "catalogues": [
                    {
                        "isPlayable": true,
                        "isPresentable": true,
                        "isPurchasable": true,
                        "catalogue": "ottlive"
                    },
                    {
                        "isPlayable": true,
                        "isPresentable": true,
                        "isPurchasable": true,
                        "catalogue": "stb4klive"
                    },
                    {
                        "isPlayable": true,
                        "isPresentable": true,
                        "isPurchasable": true,
                        "catalogue": "stblive"
                    },
                    {
                        "isPlayable": true,
                        "isPresentable": true,
                        "isPurchasable": true,
                        "catalogue": "stvlive"
                    }
                ],
                "liveEventId": "",
                "updatedBy": "autoPublish",
                "packageAssetId": "PACK0000000001017562",
                "packageId": "1017562",
                "packageTypeLabel": "Boxset",
                "classification": [
                    "Classification - Store/Movies",
                    "IVP - Store",
                    "IVP - Store/Thematic1",
                    "Pay Per View"
                ],
                "acquisitionStartDate": "",
                "platformValue": "PayTV",
                "createdBy": "KCOKOKCH",
                "sortOrder": null,
                "supplierLabel": "null",
                "acquisitionEndDate": "",
                "ownerChannels": [
                    {
                        "businessUnit": "Astro First/Astro Best",
                        "channels": [
                            {
                                "channelStbNumber": 489,
                                "channelId": 240,
                                "channelTitle": "Astro First HD (489)"
                            }
                        ]
                    }
                ],
                "platformLabel": "PayTV",
                "titleSortName": "ZZZ_CP3 SIT - Illuminations 10 Movie Collection + Minions Mini Movie 0-9 [removed embedded trailer]",
                "isSponsored": false
            },
            "media": {
                "images": [
                    {
                        "usageTypeLabel": "AFAB Poster",
                        "fileName": "5218F.jpg",
                        "fileSize": "573126",
                        "profile": [
                            "Clean"
                        ],
                        "channelLogoChecksum": null,
                        "checksum": "8877268b782f55ed69d976b5cf059552",
                        "fileUrl": "https://s3-ap-southeast-1.amazonaws.com/ams-astro-tvp-nonprod/staging/images/5218F.jpg",
                        "channelLogo": null,
                        "serviceLabel": [
                            "STB"
                        ],
                        "previewImage": "https://s3-ap-southeast-1.amazonaws.com/ams-astro-tvp-nonprod/staging/images/5218F.jpg",
                        "dimensions": "1920:1080"
                    },
                    {
                        "usageTypeLabel": "AFAB Poster",
                        "fileName": "5218F.jpg",
                        "fileSize": "573126",
                        "profile": [
                            "Clean"
                        ],
                        "channelLogoChecksum": null,
                        "checksum": "8877268b782f55ed69d976b5cf059552",
                        "fileUrl": "https://s3-ap-southeast-1.amazonaws.com/ams-astro-tvp-nonprod/staging/images/5218F.jpg",
                        "channelLogo": null,
                        "serviceLabel": [
                            "OTT"
                        ],
                        "previewImage": "https://s3-ap-southeast-1.amazonaws.com/ams-astro-tvp-nonprod/staging/images/5218F.jpg",
                        "dimensions": "1920:1080"
                    },
                    {
                        "usageTypeLabel": "payTV Poster",
                        "fileName": "5218F_p.jpg",
                        "fileSize": "672466",
                        "profile": [
                            "Channel Logo"
                        ],
                        "channelLogoChecksum": "1bb249efc060cec53aa17294befe538d",
                        "checksum": "5cebcad971f702e848494d383c84cf32",
                        "fileUrl": "https://s3-ap-southeast-1.amazonaws.com/ams-astro-tvp-nonprod/staging/images/5218F_p.jpg",
                        "channelLogo": "https://s3-ap-southeast-1.amazonaws.com/ams-astro-tvp-nonprod/staging/images/AstroFirst_24REV_190x80.png",
                        "serviceLabel": [
                            "payTVSTBOTTSTV"
                        ],
                        "previewImage": "",
                        "dimensions": "1080:1620"
                    },
                    {
                        "usageTypeLabel": "payTV Poster",
                        "fileName": "5218F.jpg",
                        "fileSize": "573126",
                        "profile": [
                            "Channel Logo"
                        ],
                        "channelLogoChecksum": "1bb249efc060cec53aa17294befe538d",
                        "checksum": "8877268b782f55ed69d976b5cf059552",
                        "fileUrl": "https://s3-ap-southeast-1.amazonaws.com/ams-astro-tvp-nonprod/staging/images/5218F.jpg",
                        "channelLogo": "https://s3-ap-southeast-1.amazonaws.com/ams-astro-tvp-nonprod/staging/images/AstroFirst_24REV_190x80.png",
                        "serviceLabel": [
                            "payTVSTBOTTSTV"
                        ],
                        "previewImage": "",
                        "dimensions": "1920:1080"
                    }
                ],
                "subtitleMapping": [
                    {
                        "burnedIn": false,
                        "services": [
                            "IVP(STB_OTT_STV)"
                        ],
                        "languageValue": "chi"
                    },
                    {
                        "burnedIn": false,
                        "services": [
                            "IVP(STB_OTT_STV)"
                        ],
                        "languageValue": "eng"
                    },
                    {
                        "burnedIn": false,
                        "services": [
                            "IVP(STB_OTT_STV)"
                        ],
                        "languageValue": "may"
                    }
                ],
                "audioMapping": [],
                "mediaPreview": {
                    "duration": null,
                    "durationInFrame": null,
                    "clipId": null,
                    "services": null
                },
                "mamSegments": [],
                "avPreview": {
                    "durationInSec": null,
                    "enable": true,
                    "startPositionInSec": null
                },
                "imageRibbons": [],
                "mediaFull": {
                    "duration": null,
                    "durationInFrame": "",
                    "formatLabel": "",
                    "fullAssetClipId": "",
                    "assetTypeLabel": ""
                }
            },
            "publishData": [
                {
                    "publishAction": "update",
                    "publishDate": "2025-09-25 14:54:01",
                    "publishAuditId": 1694428,
                    "category": [
                        "Classification - Store/Movies",
                        "IVP - Store",
                        "IVP - Store/Thematic1",
                        "Pay Per View"
                    ],
                    "user": "autoPublish",
                    "platform": "PayTV",
                    "publishStatus": "Sent"
                },
                {
                    "publishAction": "publish",
                    "publishDate": "2025-09-09 23:18:11",
                    "publishAuditId": 1692510,
                    "category": [
                        "Classification - Store/Movies",
                        "IVP - Store",
                        "IVP - Store/Thematic1",
                        "Pay Per View"
                    ],
                    "user": "Kok Chien",
                    "platform": "PayTV",
                    "publishStatus": "Sent"
                },
                {
                    "publishAction": "purge",
                    "publishDate": "2025-09-08 16:42:35",
                    "publishAuditId": 1692420,
                    "category": [
                        "Classification - Store/Movies",
                        "IVP - Store",
                        "IVP - Store/Thematic1",
                        "Pay Per View"
                    ],
                    "user": "Kok Chien",
                    "platform": "PayTV",
                    "publishStatus": "Sent"
                },
                {
                    "publishAction": "publish",
                    "publishDate": "2025-09-03 20:19:25",
                    "publishAuditId": 1691977,
                    "category": [
                        "Classification - Store/Movies",
                        "IVP - Store",
                        "IVP - Store/Thematic1",
                        "Pay Per View"
                    ],
                    "user": "Kok Chien",
                    "platform": "PayTV",
                    "publishStatus": "Sent"
                }
            ],
            "hierarchyChild": null
        }
    ]
},
trailers: {
    "hits": "1",
    "responseCode": "200",
    "responseMessage": "Success",
    "data": [
        {
            "offers": [
                {
                    "blockAds": false,
                    "providerContentTier": [
                        {
                            "label": "Family",
                            "sku": [],
                            "value": "29|30|33|34|53|230|236|237|479"
                        }
                    ],
                    "adsPostRoll": "N",
                    "providerContentTierLabel": [
                        "Family"
                    ],
                    "comingSoonEndDate": "",
                    "adsEnabled": false,
                    "adsSupplier": "MBNS",
                    "d2GoMaxPlay_countLabel": "",
                    "adsPreRoll": "N",
                    "d2GoPlaybackPeriodLabel": "",
                    "sellingPeriodStart": null,
                    "serviceLabel": "payTV(STB_OTT)",
                    "adsMidRoll": "N",
                    "offerStart": "2025-06-11 00:00:00",
                    "d2GoRetentionPeriodLabel": "2",
                    "assetLifeCycle": "",
                    "offerRow": [
                        {
                            "inAppPrice": "Not Applicable",
                            "offerTypeLabel": "SVOD",
                            "bmLabel": null,
                            "maxView": 0,
                            "priceLabelGst": 0,
                            "regionLabel": "Malaysia",
                            "currencyLabel": null,
                            "priceLabel": null
                        }
                    ],
                    "offerEnd": "2025-12-31 23:59:59",
                    "prelogin": false,
                    "castingLabel": [],
                    "sfvAccountLabel": [],
                    "thirdPartyLabel": "",
                    "downloadToGoivpAdiProviderId": "astro.2d",
                    "download2Go": true,
                    "sellingPeriodEnd": null,
                    "chargeCode": "CUVODRES"
                }
            ],
            "linearSchedule": {
                "linearChargeCodePriceValueGst": "",
                "linearChargeCodeTypeLabel": "",
                "linearChargeCodePriceLabel": "",
                "epgLink": [],
                "linearChargeCode": "",
                "linearChargeCodePriceValue": ""
            },
            "metadata": {
                "englishMetadata": {
                    "marketingMessage": "",
                    "episodeTitle": "Trailer 1",
                    "audioLanguageLabel": "eng",
                    "yearOfRelease": 2024,
                    "keywords": [
                        "4 Mahal Na Mahal Kita",
                        "Astro Ria HD",
                        "Astro Ria",
                        "AZILA",
                        "English Family",
                        "English Movies",
                        "English Romance",
                        "English",
                        "Family",
                        "Movies Family",
                        "Movies Romance",
                        "Movies",
                        "Ria",
                        "Romance",
                        "Trailer 1"
                    ],
                    "directors": [
                        "Sweetnotes"
                    ],
                    "seasonNumber": "",
                    "title": "4 Mahal Na Mahal Kita",
                    "episodeNumber": "",
                    "subFilter": [
                        {
                            "code": "1~10",
                            "label": "Family",
                            "value": "Filter/27"
                        },
                        {
                            "code": "1~6",
                            "label": "Romance",
                            "value": "Filter/60"
                        }
                    ],
                    "certification": "U",
                    "filter": {
                        "label": "Movies",
                        "value": "Filter/42"
                    },
                    "subGenre": "Family",
                    "shortSynopsis": "this is the short synopsis",
                    "actors": [
                        "Sweetnotes"
                    ],
                    "genre": "Movie",
                    "yearOfRealease": 2024,
                    "producer": [],
                    "longSynopsis": "this is the long synopsis"
                },
                "vernacular": [
                    {
                        "shortSynopsis": "",
                        "marketingMessage": "",
                        "episodeTitle": "",
                        "actors": [],
                        "languageLabel": "may",
                        "directors": [],
                        "producer": [],
                        "title": "",
                        "longSynopsis": ""
                    },
                    {
                        "shortSynopsis": "",
                        "marketingMessage": "",
                        "episodeTitle": "",
                        "actors": [],
                        "languageLabel": "chi",
                        "directors": [],
                        "producer": [],
                        "title": "",
                        "longSynopsis": ""
                    },
                    {
                        "shortSynopsis": "",
                        "marketingMessage": "",
                        "episodeTitle": "",
                        "actors": [],
                        "languageLabel": "tam",
                        "directors": [],
                        "producer": [],
                        "title": "",
                        "longSynopsis": ""
                    },
                    {
                        "shortSynopsis": "",
                        "marketingMessage": "",
                        "episodeTitle": "",
                        "actors": [],
                        "languageLabel": "ind",
                        "directors": [],
                        "producer": [],
                        "title": "",
                        "longSynopsis": ""
                    },
                    {
                        "shortSynopsis": "",
                        "marketingMessage": "",
                        "episodeTitle": "",
                        "actors": [],
                        "languageLabel": "tha",
                        "directors": [],
                        "producer": [],
                        "title": "",
                        "longSynopsis": ""
                    }
                ]
            },
            "access": {
                "swDrmResolutionCap": null,
                "hwDrmResolutionCap": null,
                "cdnTokenisation": false,
                "acrossAllDevice": null,
                "deviceSpecific": []
            },
            "outputMedia": [
                {
                    "introEOM": "",
                    "recapSOM": "",
                    "usage": "Full Asset",
                    "audioDetails": [
                        {
                            "trackNumber": 1,
                            "audioProperty": "Stereo",
                            "audioLanguage": "en"
                        },
                        {
                            "trackNumber": 2,
                            "audioProperty": "Dolby 2.0",
                            "audioLanguage": "en"
                        }
                    ],
                    "format": "HD",
                    "fileLocation": {
                        "onPrem": "\\isilon\\onprem\\",
                        "onCloud": "https://iepaytv-migrationstaging.s3.amazonaws.com/preview/KLMXV"
                    },
                    "type": "ATS",
                    "endCreditSOM": "",
                    "version": 2,
                    "duration": "00:06:21:02",
                    "introSOM": "",
                    "recapEOM": "",
                    "filename": "KLMXV_trailer_Layer1.ts",
                    "onPrem": false,
                    "mamVersionId": "KLMXV",
                    "subtitleDetails": [],
                    "hd": true,
                    "onCloud": true,
                    "endCreditEOM": ""
                }
            ],
            "hierarchyParents": [
                {
                    "packId": 1017148,
                    "platformValue": [
                        "iSOTT",
                        "payTV"
                    ],
                    "parentTypeLabel": "Secondary",
                    "typeLabel": "Title",
                    "vodPackId": "PACK0000000001017066",
                    "title": "SIT1-SVOD Trailer1 [KC Copy - to replicate issues on 1017068]",
                    "platformLabel": [
                        "iSOTT",
                        "payTV"
                    ],
                    "parentId": 1017066
                }
            ],
            "documentId": "1017148:22",
            "package_data": {
                "brandpage": false,
                "ndsPackageAssetId": "",
                "excludeBrand": false,
                "newLabelEnabled": false,
                "provider": "",
                "boxsetTypeLabel": "",
                "providerId": "",
                "supplier": "",
                "additionalInfo": [],
                "audienceCommunity": [
                    "STAGING"
                ],
                "packageName": "SIT1-SVOD Trailer1 [KC Copy - to replicate issues on 1017068]",
                "audienceLabel": "Staging",
                "catalogues": [
                    {
                        "isPlayable": true,
                        "isPresentable": true,
                        "isPurchasable": true,
                        "catalogue": "otttest"
                    },
                    {
                        "isPlayable": true,
                        "isPresentable": true,
                        "isPurchasable": true,
                        "catalogue": "stb4ktest"
                    },
                    {
                        "isPlayable": true,
                        "isPresentable": true,
                        "isPurchasable": true,
                        "catalogue": "stbtest"
                    }
                ],
                "liveEventId": "",
                "updatedBy": "KCOKOKCH",
                "packageAssetId": "PACK0000000001017148",
                "packageId": "1017148",
                "packageTypeLabel": "Trailer",
                "classification": [
                    "Catch Up",
                    "Classification - Movies/English"
                ],
                "acquisitionStartDate": "",
                "platformValue": "PayTV",
                "createdBy": "KCOKOKCH",
                "sortOrder": null,
                "supplierLabel": "null",
                "acquisitionEndDate": "",
                "ownerChannels": [
                    {
                        "businessUnit": "Malay Business Unit",
                        "channels": [
                            {
                                "channelStbNumber": 104,
                                "channelId": 193,
                                "channelTitle": "Astro Ria"
                            }
                        ]
                    }
                ],
                "platformLabel": "PayTV",
                "titleSortName": "ZZZ_4 Mahal Na Mahal Kita",
                "isSponsored": false
            },
            "media": {
                "images": [
                    {
                        "usageTypeLabel": "payTV Poster",
                        "fileName": "watchmen.jpg",
                        "fileSize": "829660",
                        "profile": [
                            "Channel Logo"
                        ],
                        "channelLogoChecksum": "3caa879d539bd7eb7de61f6b24389729",
                        "checksum": "992c3f6a014f0854bacabc308a07236e",
                        "fileUrl": "https://s3-ap-southeast-1.amazonaws.com/ams-astro-tvp-nonprod/staging/images/watchmen.jpg",
                        "channelLogo": "https://s3-ap-southeast-1.amazonaws.com/ams-astro-tvp-nonprod/staging/images/AstroAEC_2024_190x80.png",
                        "serviceLabel": [
                            "payTVSTBOTT"
                        ],
                        "previewImage": "https://s3-ap-southeast-1.amazonaws.com/ams-astro-tvp-nonprod/staging/images/watchmen.jpg",
                        "dimensions": "1920:1080"
                    }
                ],
                "subtitleMapping": [],
                "audioMapping": [
                    {
                        "services": [
                            "payTVSTBOTT"
                        ],
                        "languageValue": "eng",
                        "trackValue": "Stereo 1 (1+2)"
                    }
                ],
                "mediaPreview": {
                    "duration": null,
                    "durationInFrame": null,
                    "clipId": null,
                    "services": null
                },
                "mamSegments": [
                    {
                        "duration": "00:06:21:00",
                        "som": "10:04:10:00",
                        "sequence": 1,
                        "eom": "10:10:31:00",
                        "part": 1,
                        "segmentType": "P"
                    }
                ],
                "avPreview": {
                    "durationInSec": null,
                    "enable": true,
                    "startPositionInSec": null
                },
                "imageRibbons": [],
                "mediaFull": {
                    "duration": "9525",
                    "durationInFrame": "00:06:21:00",
                    "formatLabel": "High Definition (HD)",
                    "fullAssetClipId": "KLMXV",
                    "assetTypeLabel": "CATC"
                }
            },
            "publishData": [
                {
                    "publishAction": "delete",
                    "publishDate": "2025-06-25 15:44:07",
                    "publishAuditId": 1687663,
                    "category": [
                        "Catch Up",
                        "Classification - Movies/English"
                    ],
                    "user": "autoDelete",
                    "platform": "PayTV",
                    "publishStatus": "Sent"
                },
                {
                    "publishAction": "update",
                    "publishDate": "2025-06-11 15:52:56",
                    "publishAuditId": 1685939,
                    "category": [
                        "Catch Up",
                        "Classification - Movies/English"
                    ],
                    "user": "Kok Chien",
                    "platform": "PayTV",
                    "publishStatus": "Sent"
                },
                {
                    "publishAction": "publish",
                    "publishDate": "2025-06-11 14:17:27",
                    "publishAuditId": 1685922,
                    "category": [
                        "Catch Up",
                        "Classification - Movies/English"
                    ],
                    "user": "Kok Chien",
                    "platform": "PayTV",
                    "publishStatus": "Sent"
                },
                {
                    "publishAction": "publish",
                    "publishDate": "2025-06-11 14:11:09",
                    "publishAuditId": 1685919,
                    "category": [
                        "Catch Up",
                        "Classification - Movies/English"
                    ],
                    "user": "Kok Chien",
                    "platform": "PayTV",
                    "publishStatus": "Failed"
                }
            ],
            "hierarchyChild": null
        }
    ]
}
    };
                                                                      
function makeInputForType(value, onChange) {
  let input;

  if (typeof value === "number") {
    input = document.createElement("input");
    input.type = "number";
    input.value = value;
    input.oninput = e => onChange(Number(e.target.value));

  } else if (typeof value === "boolean") {
    input = document.createElement("select");
    ["true", "false"].forEach(opt => {
      const option = document.createElement("option");
      option.value = opt;
      option.textContent = opt;
      if (String(value) === opt) option.selected = true;
      input.appendChild(option);
    });
    input.onchange = e => onChange(e.target.value === "true");

  } else {
    input = document.createElement("input");
    input.type = "text";
    input.value = value ?? "";
    input.oninput = e => onChange(e.target.value);
  }
  return input;
}

function buildForm(obj, container, parentKey = "", isRoot = false) {

  // ‚úÖ Clear ONLY at root level
  if (isRoot) {
    container.innerHTML = "";
  }
 

  if (Array.isArray(obj)) {
    obj.forEach((item, idx) => {
      const wrapper = document.createElement("div");
      wrapper.className = "card";

      const prettyName = parentKey
        ? parentKey.charAt(0).toUpperCase() + parentKey.slice(1) + " Item " + (idx + 1)
        : "Item " + (idx + 1);

      const title = document.createElement("h3");
      title.textContent = prettyName;

      const content = document.createElement("div");
      content.className = "content";
      content.style.display = "block";

      title.onclick = () =>
        content.style.display = content.style.display === "none" ? "block" : "none";

      if (typeof item === "object" && item !== null) {
        buildForm(item, content, parentKey, false);
      } else {
        const input = makeInputForType(item, val => {
          obj[idx] = val;
        });
        content.appendChild(input);
      }

      wrapper.appendChild(title);
      wrapper.appendChild(content);

      
      if (!isRoot) {
        const removeBtn = document.createElement("button");
        removeBtn.textContent = "Remove";
        removeBtn.className = "small";
        removeBtn.onclick = () => {
          obj.splice(idx, 1);
          buildForm(obj, container, parentKey, isRoot);
        };
        wrapper.appendChild(removeBtn);
      }

      container.appendChild(wrapper);
    });

    /*  Add new element */
    const addBtn = document.createElement("button");
    addBtn.textContent = `Add ${parentKey ? parentKey : "Item"}`;
    addBtn.className = "small";
    addBtn.onclick = () => {
      let newVal = "";

      if (typeof obj[0] === "number") newVal = 0;
      else if (typeof obj[0] === "boolean") newVal = false;
      else if (typeof obj[0] === "object") newVal = structuredClone(obj[0] ?? {});
      
      obj.push(newVal);

      buildForm(obj, container, parentKey, isRoot);
    };
    container.appendChild(addBtn);

  } else if (typeof obj === "object" && obj !== null) {

    for (let key in obj) {
      const value = obj[key];
      const wrapper = document.createElement("div");

      if (typeof value === "object" && value !== null) {
        const title = document.createElement("h3");
        title.textContent = key;

        const content = document.createElement("div");
        content.className = "content";
        content.style.display = "none";

        title.onclick = () =>
          content.style.display = content.style.display === "none" ? "block" : "none";

        buildForm(value, content, key, false);

        wrapper.appendChild(title);
        wrapper.appendChild(content);

      } else {
        const label = document.createElement("label");
        label.textContent = key;

        const input = makeInputForType(value, val => {
          obj[key] = val;
        });

        wrapper.appendChild(label);
        wrapper.appendChild(input);
      }
      container.appendChild(wrapper);
    }
  }
}

async function loadListView() {
  const formContainer = document.getElementById("formContainer");
  formContainer.dataset.active = "list";
  formContainer.innerHTML = `
    <div class="card">
      <div style="display:flex; justify-content:space-between; align-items:end; gap:12px;">
        
        <h3 style="margin:0">Package List</h3>

        <div style="display:flex; gap:8px;">
          <input id="searchPkgId" placeholder="Search by Package ID">
          <button class="small" onclick="searchByPackageId()">Search</button>
        </div>

      </div>

      <div style="margin-top:12px; max-width:300px;">
        <label>Filter by Package Type</label>
        <select id="filterPackageType" onchange="filterByPackageType()">
          <option value="">All</option>
        </select>
      </div>
    </div>

    <div class="card">
      <table id="packageTable" width="100%" cellpadding="8"></table>
    </div>
  `;

  await populatePackageTypeFilter();
  await fetchPackageList(); // initial load (all rows)
}

async function populatePackageTypeFilter() {
  const { data, error } = await supabase
    .from("newirdata")
    .select("package_label");

  if (error) return;

  const unique = [...new Set(data.map(d => d.package_label))];
  const select = document.getElementById("filterPackageType");

  unique.forEach(val => {
    if (!val) return;
    const opt = document.createElement("option");
    opt.value = val;
    opt.textContent = val;
    select.appendChild(opt);
  });
}

async function fetchPackageList(filter = {}) {
  let query = supabase
    .from("newirdata")
    .select(`
      id,
      package_id,
      package_label,
      offer_type_label,
      prelogin,
      payload,
      created_at,
      updated_at 
    `)
    .order("created_at", { ascending: false });

  if (filter.packageType) {
    query = query.eq("package_label", filter.packageType);
  }

  if (filter.packageId) {
    query = query.eq("package_id", filter.packageId);
  }

  const { data, error } = await query;

  if (error) {
    alert(error.message);
    return;
  }

  renderPackageTable(data);
}

async function searchByPackageId() {
  const pkgId = document.getElementById("searchPkgId").value.trim();
  if (!pkgId) {
    alert("Enter Package ID");
    return;
  }

  await fetchPackageList({ packageId: pkgId });
}

async function filterByPackageType() {
  const type = document.getElementById("filterPackageType").value;
  await fetchPackageList({ packageType: type });
}

function openJsonModal(payload) {
  const modal = document.getElementById("jsonModal");
  const content = document.getElementById("jsonModalContent");

  content.textContent = JSON.stringify(payload, null, 2);
  modal.style.display = "flex";
}

function closeJsonModal() {
  document.getElementById("jsonModal").style.display = "none";
}

function renderPackageTable(rows) {
  const table = document.getElementById("packageTable");

  payloadCache.clear(); // reset cache

  table.innerHTML = `
    <tr style="background:#f4f4f5">
      <th>Package ID</th>
      <th>Package Label</th>
      <th>Offer Type</th>
      <th>Prelogin</th>
      <th>Created At</th>
      <th>Updated At</th>
      <th>Payload</th>
      <th>Edit</th>
    </tr>
  `;

  rows.forEach(row => {
    payloadCache.set(row.id, row.payload); // cache payload

    const tr = document.createElement("tr");

    tr.innerHTML = `
      <td>${row.package_id}</td>
      <td>${row.package_label}</td>
      <td>${row.offer_type_label ?? "-"}</td>
      <td>${row.prelogin}</td>
      <td>${new Date(row.created_at).toLocaleString()}</td>
      <td>${row.updated_at ? new Date(row.updated_at).toLocaleString() : "-"}</td>


      <td>
        <button class="small" onclick="openPayloadView('${row.id}')">
          View
        </button>
      </td>

      <td>
        <button class="small" onclick="editFromList('${row.package_id}')">
          Edit
        </button>
      </td>
    `;

    table.appendChild(tr);
  });
}

function viewPayload(payload) {
  const formContainer = document.getElementById("formContainer");
  formContainer.innerHTML = `
    <div class="card">
      <pre style="max-height:600px; overflow:auto;">
${JSON.stringify(payload, null, 2)}
      </pre>
    </div>
  `;
}

let activeViewedPayload = null;

function openPayloadView(rowId) {
  const payload = payloadCache.get(rowId);

  if (!payload) {
    alert("Payload not found");
    return;
  }

  activeViewedPayload = payload;

  document.getElementById("payloadViewerContent").textContent =
    JSON.stringify(payload, null, 2);

  document.getElementById("payloadViewer").style.right = "0";
}

function closePayloadView() {
  document.getElementById("payloadViewer").style.right = "-45%";
  activeViewedPayload = null;
}

function downloadViewedPayload() {
  if (!activeViewedPayload) return;

  const jsonStr = JSON.stringify(activeViewedPayload, null, 2);
  const blob = new Blob([jsonStr], { type: "application/json" });
  const url = URL.createObjectURL(blob);

  const a = document.createElement("a");
  a.href = url;
  a.download = "payload.json";
  a.click();

  URL.revokeObjectURL(url);
}

async function editFromList(packageId) {
  const { data, error } = await supabase
    .from("newirdata")
    .select("payload")
    .eq("package_id", packageId)
    .single();

  if (error) {
    alert(error.message);
    return;
  }

  currentPackageId = packageId;
  currentPayload = data.payload;

  loadJsonForEditing(data.payload);
}

function loadCategory(cat) {
currentPackageId = null;
currentPayload = null;

  
  const formContainer = document.getElementById("formContainer");
  formContainer.innerHTML = "";
  formContainer.dataset.active = cat;
   
  currentPayload = sampleData[cat];

  
  if (!sampleData[cat]) return;

  const dataObj = sampleData[cat].data[0];

  const topFieldsRow = document.createElement("div");
  topFieldsRow.className = "top-fields-row";

  Object.keys(dataObj).forEach(key => {
    const topCard = document.createElement("div");
    topCard.className = "card top-level";
    topCard.textContent = key;

    topCard.onclick = () => {

      Array.from(formContainer.querySelectorAll('.detail-card')).forEach(e => e.remove());
      Array.from(formContainer.querySelectorAll('.card.top-level')).forEach(e => e.classList.remove('active'));

      topCard.classList.add('active');

      const detailCard = document.createElement("div");
      detailCard.className = "card detail-card";

      buildForm(dataObj[key], detailCard, key, true);
      formContainer.appendChild(detailCard);
    };

    topFieldsRow.appendChild(topCard);
  });

  formContainer.appendChild(topFieldsRow);
}

function loadEPGFetcher() {
  const formContainer = document.getElementById("formContainer");
  formContainer.dataset.active = "epg";

  formContainer.innerHTML = `
    <div class="card">
      <h3>EPG Fetcher</h3>

      <label>Channel ID</label>
      <input type="number" id="epgChannelId" value="161">

      <label>Start Date</label>
      <input type="date" id="epgStartDate">

      <label>End Date</label>
      <input type="date" id="epgEndDate" disabled>

      <button class="small" style="margin-top:12px" onclick="fetchEPG()">
        Fetch & Download EPG
      </button>
    </div>
  `;

  // Auto-calculate end date
  document.getElementById("epgStartDate").addEventListener("change", () => {
    const start = document.getElementById("epgStartDate").value;
    if (!start) return;

    const dt = new Date(start);
    dt.setDate(dt.getDate() + 1);
    document.getElementById("epgEndDate").value =
      dt.toISOString().split("T")[0];
  });
}


async function fetchEPG() {
  const channelId = document.getElementById("epgChannelId").value;
  const startDate = document.getElementById("epgStartDate").value;
  const endDate = document.getElementById("epgEndDate").value;

  if (!channelId || !startDate || !endDate) {
    alert("Please select start date and channel");
    return;
  }

  // Convert to required UTC window
  const startUTC = `${startDate}T06:00:00Z`;
  const endUTC   = `${endDate}T05:59:59Z`;

  const body = {
    channelId: Number(channelId),
    start: startUTC,
    end: endUTC,
    timestamp: new Date().toISOString()
  };

  try {
    const response = await fetch("http://172.28.1.180:8000", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify(body)
    });

    const data = await response.json();

    const blob = new Blob([JSON.stringify(data, null, 2)], {
      type: "application/json"
    });

    const url = URL.createObjectURL(blob);
    const a = document.createElement("a");
    a.href = url;
    a.download = `epg_${channelId}_${startDate}.json`;
    a.click();
    URL.revokeObjectURL(url);

  } catch (err) {
    alert("EPG Fetch failed: " + err.message);
  }
}




async function downloadJSON() {
  const formContainer = document.getElementById("formContainer");
  const mode = formContainer.dataset.active;

  let payloadToSave;

  // 1Ô∏è‚É£ Decide source JSON
  if (mode === "edit") {
    if (!currentPackageId || !currentPayload) {
      alert("Edit mode error: No package loaded");
      return;
    }
    payloadToSave = currentPayload;
  } else {
    const cat = mode || "movie";
    payloadToSave = sampleData[cat];
  }

  const jsonStr = JSON.stringify(payloadToSave, null, 2);

  try {
    let response;

    // 2Ô∏è‚É£ EDIT MODE ‚Üí UPDATE (OVERRIDE)
    if (mode === "edit") {
      console.log("Overwriting JSON for package_id:", currentPackageId);

      response = await supabase
        .from("newirdata")
        .update({
          payload: payloadToSave,
          updated_at: new Date().toISOString()
        })
        .eq("package_id", currentPackageId);
    }

    // 3Ô∏è‚É£ CREATE MODE ‚Üí INSERT
    else {
      console.log("Creating new JSON");

      response = await supabase
        .from("newirdata")
        .insert([{ payload: payloadToSave }]);
    }

    // 4Ô∏è‚É£ Handle DB errors
    if (response.error) {
      if (response.error.code === "23505") {
        alert(
          "A JSON with this Package ID already exists.\n\n" +
          "Please SEARCH and EDIT the existing JSON instead."
        );
      } else {
        alert("Database error: " + response.error.message);
      }
      return;
    }

    // 5Ô∏è‚É£ Download JSON locally
    const blob = new Blob([jsonStr], { type: "application/json" });
    const url = URL.createObjectURL(blob);

    const a = document.createElement("a");
    a.href = url;
    a.download = `${currentPackageId || "vod_asset"}.json`;
    a.click();

    URL.revokeObjectURL(url);

    alert(
      mode === "edit"
        ? "JSON updated in backend and downloaded successfully"
        : "JSON created and downloaded successfully"
    );

  } catch (err) {
    alert("Unexpected error: " + err.message);
  }
}

</script>
</body>  
</html>  
